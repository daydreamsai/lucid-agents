{"version":3,"sources":["../src/runtime.ts"],"names":[],"mappings":";;;AA6BA,SAAS,oBACP,OAAA,EACwB;AACxB,EAAA,OAAO,OAAO,EAAE,OAAA,EAAQ,KAAM,QAAQ,OAAO,CAAA;AAC/C;AAEA,SAAS,kBACP,OAAA,EACyB;AACzB,EAAA,OAAO,OAAO,EAAE,OAAA,EAAS,QAAO,KAAM,OAAA,CAAQ,SAAS,MAAM,CAAA;AAC/D;AAEO,SAAS,uBACd,OAAA,EACkB;AAClB,EAAA,MAAM,EAAE,UAAS,GAAI,OAAA;AACrB,EAAA,OAAO;AAAA,IACL,MAAA,EAAQ,mBAAA,CAAoB,QAAA,CAAS,MAAM,CAAA;AAAA,IAC3C,WAAA,EAAa,mBAAA,CAAoB,QAAA,CAAS,WAAW,CAAA;AAAA,IACrD,QAAA,EAAU,mBAAA,CAAoB,QAAA,CAAS,QAAQ,CAAA;AAAA,IAC/C,OAAA,EAAS,mBAAA,CAAoB,QAAA,CAAS,OAAO,CAAA;AAAA,IAC7C,SAAS,QAAA,CAAS,OAAA,GACd,mBAAA,CAAoB,QAAA,CAAS,OAAO,CAAA,GACpC,MAAA;AAAA,IACJ,MAAA,EAAQ,iBAAA,CAAkB,QAAA,CAAS,MAAM,CAAA;AAAA,IACzC,MAAA,EAAQ,iBAAA,CAAkB,QAAA,CAAS,MAAM;AAAA,GAC3C;AACF;AAEO,SAAS,qBAAA,CACd,IAAA,EACA,IAAA,GAA+B,EAAC,EACf;AACjB,EAAA,MAAM,OAAA,GAAU,sBAAA,CAAuB,IAAA,EAAM,IAAI,CAAA;AACjD,EAAA,OAAO;AAAA,IACL,OAAA;AAAA,IACA,QAAA,EAAU,uBAAuB,OAAO;AAAA,GAC1C;AACF","file":"index.js","sourcesContent":["import {\n  createAgentHttpRuntime,\n  type AgentHttpRuntime,\n  type AgentMeta,\n  type CreateAgentHttpOptions,\n} from \"@lucid-agents/agent-kit\";\n\nexport type TanStackRequestHandler = (ctx: { request: Request }) => Promise<Response>;\n\nexport type TanStackRouteHandler<P extends Record<string, string>> = (ctx: {\n  request: Request;\n  params: P;\n}) => Promise<Response>;\n\nexport type TanStackHandlers = {\n  health: TanStackRequestHandler;\n  entrypoints: TanStackRequestHandler;\n  manifest: TanStackRequestHandler;\n  favicon: TanStackRequestHandler;\n  landing?: TanStackRequestHandler;\n  invoke: TanStackRouteHandler<{ key: string }>;\n  stream: TanStackRouteHandler<{ key: string }>;\n};\n\nexport type TanStackRuntime = {\n  runtime: AgentHttpRuntime;\n  handlers: TanStackHandlers;\n};\n\nfunction adaptRequestHandler(\n  handler: (req: Request) => Promise<Response>\n): TanStackRequestHandler {\n  return async ({ request }) => handler(request);\n}\n\nfunction adaptRouteHandler<P extends Record<string, string>>(\n  handler: (req: Request, params: P) => Promise<Response>\n): TanStackRouteHandler<P> {\n  return async ({ request, params }) => handler(request, params);\n}\n\nexport function createTanStackHandlers(\n  runtime: AgentHttpRuntime\n): TanStackHandlers {\n  const { handlers } = runtime;\n  return {\n    health: adaptRequestHandler(handlers.health),\n    entrypoints: adaptRequestHandler(handlers.entrypoints),\n    manifest: adaptRequestHandler(handlers.manifest),\n    favicon: adaptRequestHandler(handlers.favicon),\n    landing: handlers.landing\n      ? adaptRequestHandler(handlers.landing)\n      : undefined,\n    invoke: adaptRouteHandler(handlers.invoke),\n    stream: adaptRouteHandler(handlers.stream),\n  };\n}\n\nexport function createTanStackRuntime(\n  meta: AgentMeta,\n  opts: CreateAgentHttpOptions = {}\n): TanStackRuntime {\n  const runtime = createAgentHttpRuntime(meta, opts);\n  return {\n    runtime,\n    handlers: createTanStackHandlers(runtime),\n  };\n}\n"]}