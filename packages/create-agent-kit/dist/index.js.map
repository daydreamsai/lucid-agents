{"version":3,"sources":["../src/index.ts"],"names":["match","resolve","defaultInput","defaultOutput"],"mappings":"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","file":"index.js","sourcesContent":["import { spawn } from \"node:child_process\";\nimport { existsSync, realpathSync } from \"node:fs\";\nimport fs from \"node:fs/promises\";\nimport { basename, dirname, join, relative, resolve } from \"node:path\";\nimport process, {\n  stdin as defaultInput,\n  stdout as defaultOutput,\n} from \"node:process\";\nimport { fileURLToPath } from \"node:url\";\nimport { createInterface } from \"node:readline/promises\";\n\ntype CliOptions = {\n  install: boolean;\n  templateId?: string;\n  envMode: \"prompt\" | \"yes\" | \"no\";\n};\n\ntype ParsedArgs = {\n  options: CliOptions;\n  target: string | null;\n  showHelp: boolean;\n};\n\ntype RunLogger = {\n  log: (message: string) => void;\n  warn: (message: string) => void;\n  error: (message: string) => void;\n};\n\ntype PromptChoice = {\n  value: string;\n  title: string;\n  description?: string;\n};\n\ntype PromptApi = {\n  select: (params: {\n    message: string;\n    choices: PromptChoice[];\n  }) => Promise<string>;\n  confirm: (params: {\n    message: string;\n    defaultValue?: boolean;\n  }) => Promise<boolean>;\n  input: (params: {\n    message: string;\n    defaultValue?: string;\n  }) => Promise<string>;\n  close?: () => Promise<void> | void;\n};\n\ntype RunOptions = {\n  cwd?: string;\n  templateRoot?: string;\n  logger?: RunLogger;\n  prompt?: PromptApi;\n};\n\ntype OnboardingCondition = {\n  key: string;\n  equals?: string | boolean;\n  in?: Array<string | boolean>;\n};\n\ntype OnboardingPrompt = {\n  key: string;\n  type: \"input\" | \"confirm\" | \"select\";\n  message: string;\n  defaultValue?: string | boolean;\n  choices?: PromptChoice[];\n  when?: OnboardingCondition;\n};\n\ntype OnboardingConfig = {\n  prompts?: OnboardingPrompt[];\n};\n\ntype TemplateMeta = {\n  id?: string;\n  name?: string;\n  description?: string;\n  adapter?: string;\n  onboarding?: OnboardingConfig;\n};\n\ntype TemplateDescriptor = {\n  id: string;\n  adapter: string;\n  title: string;\n  description?: string;\n  path: string;\n  onboarding?: OnboardingConfig;\n};\n\nconst ADAPTER_DISPLAY_NAMES: Record<string, string> = {\n  hono: \"Hono\",\n  tanstack: \"TanStack Start\",\n};\n\ntype OnboardingAnswers = Map<string, string | boolean>;\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\nconst TEMPLATE_ROOT = resolve(__dirname, \"../templates\");\n\nconst LUCID_BANNER = [\n  \"____   ____     ___   ____   ___________   \",\n\n  \"\",\n  \"\",\n  \"MM'   `MM'     `M'  6MMMMb/ `MM`MMMMMMMb. \",\n  \"MM     MM       M  8P    YM  MM MM    `Mb \",\n  \"MM     MM       M 6M      Y  MM MM     MM \",\n  \"MM     MM       M MM         MM MM     MM \",\n  \"MM     MM       M MM         MM MM     MM \",\n  \"MM     MM       M MM         MM MM     MM \",\n  \"MM     YM       M YM      6  MM MM     MM \",\n  \"MM    / 8b     d8  8b    d9  MM MM    .M9 \",\n  \"_MMMMMMM  YMMMMM9    YMMMM9  _MM_MMMMMMM9'\",\n\n  \"\",\n  \"       L U C I D  DREAMS   \",\n  \"   Agent scaffolding toolkit  \",\n];\n\nconst DEFAULT_TEMPLATE_VALUES = {\n  AGENT_VERSION: \"0.1.0\",\n  AGENT_DESCRIPTION: \"Starter agent generated with create-agent-kit\",\n  ENTRYPOINT_KEY: \"echo\",\n  ENTRYPOINT_DESCRIPTION: \"Returns text that you send to the agent.\",\n  PAYMENTS_FACILITATOR_URL: \"https://facilitator.daydreams.systems\",\n  PAYMENTS_PAY_TO: \"0xb308ed39d67D0d4BAe5BC2FAEF60c66BBb6AE429\",\n  PAYMENTS_NETWORK: \"base-sepolia\",\n  PAYMENTS_DEFAULT_PRICE: \"1000\",\n  WALLET_CONNECT_PROJECT_ID: \"demo-project-id\",\n};\n\nconst DEFAULT_PROJECT_NAME = \"agent-app\";\nconst PROJECT_NAME_PROMPT = \"Project directory name:\";\n\nconst defaultLogger: RunLogger = {\n  log: (message) => console.log(message),\n  warn: (message) => console.warn(message),\n  error: (message) => console.error(message),\n};\n\nexport async function runCli(\n  argv: string[],\n  options: RunOptions = {}\n): Promise<void> {\n  const logger = options.logger ?? defaultLogger;\n  const cwd = options.cwd ? resolve(options.cwd) : process.cwd();\n  const templateRoot = options.templateRoot\n    ? resolve(options.templateRoot)\n    : TEMPLATE_ROOT;\n  const prompt = options.prompt;\n\n  const parsed = parseArgs(argv);\n\n  printBanner(logger);\n\n  if (parsed.showHelp) {\n    printHelp(logger);\n    return;\n  }\n\n  const templates = await loadTemplates(templateRoot);\n  if (templates.length === 0) {\n    throw new Error(`No templates found in ${templateRoot}`);\n  }\n\n  const template = await resolveTemplate({\n    templates,\n    requestedId: parsed.options.templateId,\n    prompt,\n    logger,\n  });\n\n  logger.log(\n    `Using runtime adapter: ${formatAdapterName(template.adapter)}`\n  );\n  logger.log(`Using template: ${template.title}`);\n\n  const projectName = await resolveProjectName({\n    parsed,\n    prompt,\n    logger,\n    template,\n  });\n\n  const targetDir = projectName === \".\" ? cwd : resolve(cwd, projectName);\n  const projectDirName = basename(targetDir);\n  const packageName = toPackageName(projectDirName);\n\n  await assertTemplatePresent(template.path);\n  await assertTargetDirectory(targetDir);\n  const onboardingAnswers = await collectOnboardingValues({\n    template,\n    prompt,\n    context: {\n      APP_NAME: projectDirName,\n      PACKAGE_NAME: packageName,\n    },\n  });\n  const replacements = buildTemplateReplacements({\n    projectDirName,\n    packageName,\n    answers: onboardingAnswers,\n  });\n  await copyTemplate(template.path, targetDir);\n  await applyTemplateTransforms(targetDir, {\n    packageName,\n    projectDirName,\n    replacements,\n  });\n\n  await setupEnvironment({\n    targetDir,\n    envMode: parsed.options.envMode,\n    prompt,\n    logger,\n  });\n\n  if (parsed.options.install) {\n    await runInstall(targetDir, logger);\n  }\n\n  const relativeTarget = relative(cwd, targetDir) || \".\";\n  const nextSteps = [\n    relativeTarget !== \".\" ? `cd ${relativeTarget}` : null,\n    !parsed.options.install ? \"bun install\" : null,\n    \"bun run dev\",\n  ].filter(Boolean);\n\n  logger.log(\"\");\n  logger.log(`âœ¨  Created agent app in ${relativeTarget}`);\n  logger.log(\"Next steps:\");\n  nextSteps.forEach((step, index) => {\n    logger.log(`  ${index + 1}. ${step}`);\n  });\n  logger.log(\"\");\n  logger.log(\"Happy hacking!\");\n}\n\nexport type { PromptApi, RunLogger };\n\nfunction parseArgs(args: string[]): ParsedArgs {\n  const options: CliOptions = { install: false, envMode: \"prompt\" };\n  const positional: string[] = [];\n  let showHelp = false;\n\n  for (let i = 0; i < args.length; i += 1) {\n    const arg = args[i];\n\n    if (arg === \"--install\" || arg === \"-i\") {\n      options.install = true;\n    } else if (arg === \"--no-install\") {\n      options.install = false;\n    } else if (arg === \"--help\" || arg === \"-h\") {\n      showHelp = true;\n    } else if (arg === \"--env\") {\n      options.envMode = \"yes\";\n    } else if (arg === \"--no-env\") {\n      options.envMode = \"no\";\n    } else if (arg?.startsWith(\"--env=\")) {\n      const value = arg.slice(\"--env=\".length);\n      options.envMode = parseEnvMode(value);\n    } else if (arg === \"--template\" || arg === \"-t\") {\n      const value = args[i + 1];\n      if (!value) {\n        throw new Error(\"Expected value after --template\");\n      }\n      options.templateId = value;\n      i += 1;\n    } else if (arg?.startsWith(\"--template=\")) {\n      options.templateId = arg.slice(\"--template=\".length);\n    } else {\n      positional.push(arg ?? \"\");\n    }\n  }\n\n  return { options, target: positional[0] ?? null, showHelp };\n}\n\nfunction parseEnvMode(value: string): CliOptions[\"envMode\"] {\n  if (value === \"yes\" || value === \"true\" || value === \"auto\") return \"yes\";\n  if (value === \"no\" || value === \"false\" || value === \"skip\") return \"no\";\n  if (value === \"prompt\" || value === \"ask\") return \"prompt\";\n  throw new Error(\n    `Invalid value for --env: ${value}. Expected one of: prompt, yes, no.`\n  );\n}\n\nfunction printHelp(logger: RunLogger) {\n  logger.log(\"Usage: npx create-agent-kit <app-name> [options]\");\n  logger.log(\"\");\n  logger.log(\"Options:\");\n  logger.log(\"  --install, -i        Run `bun install` after scaffolding\");\n  logger.log(\"  --no-install         Skip dependency installation (default)\");\n  logger.log(\"  --template, -t NAME  Use a specific template directory\");\n  logger.log(\"  --env[=MODE]         Configure env setup (prompt|yes|no)\");\n  logger.log(\"  --no-env             Skip env setup\");\n}\n\nfunction printBanner(logger: RunLogger) {\n  LUCID_BANNER.forEach((line) => logger.log(line));\n}\n\nasync function loadTemplates(\n  templateRoot: string\n): Promise<TemplateDescriptor[]> {\n  const entries = await fs.readdir(templateRoot, { withFileTypes: true });\n  const descriptors: TemplateDescriptor[] = [];\n\n  for (const entry of entries) {\n    if (!entry.isDirectory()) continue;\n    const id = entry.name;\n    const path = join(templateRoot, id);\n    const metaPath = join(path, \"template.json\");\n    let title = toTitleCase(id);\n    let description: string | undefined;\n    let onboarding: OnboardingConfig | undefined;\n    let adapter = \"default\";\n\n    try {\n      const raw = await fs.readFile(metaPath, \"utf8\");\n      const meta = JSON.parse(raw) as TemplateMeta;\n      title = meta.name ?? toTitleCase(id);\n      description = meta.description;\n      onboarding = normalizeOnboardingConfig(meta.onboarding);\n      if (meta.adapter) {\n        adapter = meta.adapter.toLowerCase();\n      }\n    } catch (error) {\n      if ((error as NodeJS.ErrnoException).code !== \"ENOENT\") {\n        throw error;\n      }\n    }\n\n    descriptors.push({\n      id,\n      adapter,\n      title,\n      description,\n      path,\n      onboarding,\n    });\n  }\n\n  return descriptors.sort((a, b) => a.id.localeCompare(b.id));\n}\n\nfunction formatAdapterName(adapter: string): string {\n  return ADAPTER_DISPLAY_NAMES[adapter] ?? toTitleCase(adapter);\n}\n\nfunction normalizeOnboardingConfig(\n  config?: OnboardingConfig\n): OnboardingConfig | undefined {\n  if (!config) return undefined;\n  const prompts =\n    config.prompts\n      ?.map((prompt) => {\n        if (!prompt || !prompt.key || !prompt.type) {\n          return undefined;\n        }\n        if (\n          prompt.type !== \"input\" &&\n          prompt.type !== \"confirm\" &&\n          prompt.type !== \"select\"\n        ) {\n          return undefined;\n        }\n        return { ...prompt };\n      })\n      .filter((prompt): prompt is OnboardingPrompt => Boolean(prompt)) ?? [];\n\n  if (prompts.length === 0) {\n    return undefined;\n  }\n\n  return { prompts };\n}\n\nasync function resolveTemplate(params: {\n  templates: TemplateDescriptor[];\n  requestedId?: string;\n  prompt?: PromptApi;\n  logger: RunLogger;\n}): Promise<TemplateDescriptor> {\n  const { templates, requestedId, prompt, logger } = params;\n\n  if (requestedId) {\n    const match = templates.find((t) => t.id === requestedId);\n    if (!match) {\n      const available = templates.map((t) => t.id).join(\", \");\n      throw new Error(\n        `Unknown template \"${requestedId}\". Available templates: ${available}`\n      );\n    }\n    return match;\n  }\n\n  const adapters = Array.from(new Set(templates.map((t) => t.adapter)));\n  let selectedAdapter = adapters[0];\n\n  if (adapters.length > 1) {\n    if (!prompt) {\n      const available = adapters\n        .map((adapter) => formatAdapterName(adapter))\n        .join(\", \");\n      throw new Error(\n        `Multiple runtime adapters available (${available}). Re-run with --template <name>.`\n      );\n    }\n\n    const adapterChoices: PromptChoice[] = adapters.map((adapter) => ({\n      value: adapter,\n      title: formatAdapterName(adapter),\n    }));\n\n    selectedAdapter = await prompt.select({\n      message: \"Select a runtime adapter:\",\n      choices: adapterChoices,\n    });\n  }\n\n  const candidates = templates.filter((t) => t.adapter === selectedAdapter);\n  if (candidates.length === 0) {\n    logger.warn(\n      `No templates found for adapter \"${selectedAdapter}\". Falling back to default template list.`\n    );\n    return templates[0]!;\n  }\n\n  if (candidates.length === 1) {\n    return candidates[0]!;\n  }\n\n  if (!prompt) {\n    const available = candidates.map((t) => t.id).join(\", \");\n    throw new Error(\n      `Multiple templates available for adapter \"${selectedAdapter}\" (${available}). Re-run with --template <name>.`\n    );\n  }\n\n  const choices: PromptChoice[] = candidates.map((template) => ({\n    value: template.id,\n    title: template.title,\n    description: template.description,\n  }));\n\n  const selection = await prompt.select({\n    message: \"Select a template variant:\",\n    choices,\n  });\n\n  const match = candidates.find((t) => t.id === selection);\n  if (!match) {\n    logger.warn(\n      `Template \"${selection}\" not found; falling back to first option.`\n    );\n    return candidates[0]!;\n  }\n  return match;\n}\n\nfunction toTitleCase(value: string) {\n  return value\n    .split(/[-_]/g)\n    .map((part) => part.charAt(0).toUpperCase() + part.slice(1))\n    .join(\" \");\n}\n\nfunction toPackageName(input: string): string {\n  const normalized = input\n    .trim()\n    .toLowerCase()\n    .replace(/\\s+/g, \"-\")\n    .replace(/[^a-z0-9._-]/g, \"-\")\n    .replace(/^-+/, \"\")\n    .replace(/-+$/, \"\");\n  return normalized.length > 0 ? normalized : \"agent-app\";\n}\n\nasync function resolveProjectName(params: {\n  parsed: ParsedArgs;\n  prompt?: PromptApi;\n  logger: RunLogger;\n  template: TemplateDescriptor;\n}): Promise<string> {\n  const { parsed, prompt, logger, template } = params;\n\n  if (parsed.target && parsed.target.trim().length > 0) {\n    return parsed.target;\n  }\n\n  const defaultName = buildDefaultProjectName({ parsed, template });\n\n  if (prompt) {\n    const response = await prompt.input({\n      message: PROJECT_NAME_PROMPT,\n      defaultValue: defaultName,\n    });\n    const sanitized = sanitizeAnswerString(response);\n    return sanitized.length > 0 ? sanitized : defaultName;\n  }\n\n  logger.log(`No <app-name> supplied; defaulting to \"${defaultName}\".`);\n  return defaultName;\n}\n\nfunction buildDefaultProjectName(params: {\n  parsed: ParsedArgs;\n  template: TemplateDescriptor;\n}): string {\n  const templateId = params.parsed.options.templateId ?? params.template?.id;\n\n  const candidateSource =\n    typeof templateId === \"string\" && templateId.length > 0\n      ? templateId\n      : DEFAULT_PROJECT_NAME;\n\n  let candidate = toPackageName(candidateSource);\n  if (!candidate || candidate.length === 0) {\n    candidate = DEFAULT_PROJECT_NAME;\n  }\n\n  if (\n    candidate !== DEFAULT_PROJECT_NAME &&\n    !candidate.endsWith(\"-agent\")\n  ) {\n    candidate = `${candidate}-agent`;\n  }\n\n  return candidate;\n}\n\nasync function collectOnboardingValues(params: {\n  template: TemplateDescriptor;\n  prompt?: PromptApi;\n  context: Record<string, string>;\n}): Promise<OnboardingAnswers> {\n  const { template, prompt, context } = params;\n  const answers: OnboardingAnswers = new Map();\n  const prompts = template.onboarding?.prompts ?? [];\n\n  for (const question of prompts) {\n    if (!shouldAskOnboardingPrompt(question, answers)) {\n      continue;\n    }\n\n    const defaultValue = resolveOnboardingDefault({\n      question,\n      context,\n      answers,\n    });\n\n    const response = await askOnboardingPrompt({\n      promptApi: prompt,\n      question,\n      defaultValue,\n    });\n\n    if (question.type === \"confirm\") {\n      answers.set(question.key, Boolean(response));\n    } else {\n      answers.set(question.key, sanitizeAnswerString(String(response)));\n    }\n  }\n\n  return answers;\n}\n\nfunction shouldAskOnboardingPrompt(\n  question: OnboardingPrompt,\n  answers: OnboardingAnswers\n): boolean {\n  if (!question.when) return true;\n  const gateValue = answers.get(question.when.key);\n  if (question.when.equals !== undefined) {\n    return gateValue === question.when.equals;\n  }\n  if (question.when.in?.length) {\n    return question.when.in.includes(gateValue as never);\n  }\n  return true;\n}\n\nfunction resolveOnboardingDefault(params: {\n  question: OnboardingPrompt;\n  context: Record<string, string>;\n  answers: OnboardingAnswers;\n}): string | boolean | undefined {\n  const { question, context, answers } = params;\n  const baseContext = {\n    ...DEFAULT_TEMPLATE_VALUES,\n    ...context,\n  };\n\n  if (question.type === \"confirm\") {\n    if (typeof question.defaultValue === \"boolean\") {\n      return question.defaultValue;\n    }\n    if (typeof question.defaultValue === \"string\") {\n      const normalized = question.defaultValue.trim().toLowerCase();\n      if ([\"true\", \"yes\", \"y\", \"1\"].includes(normalized)) return true;\n      if ([\"false\", \"no\", \"n\", \"0\"].includes(normalized)) return false;\n    }\n    return undefined;\n  }\n\n  if (typeof question.defaultValue === \"string\") {\n    return interpolateTemplateString(\n      question.defaultValue,\n      baseContext,\n      answers\n    );\n  }\n  if (typeof question.defaultValue === \"boolean\") {\n    return question.defaultValue ? \"true\" : \"false\";\n  }\n\n  return undefined;\n}\n\nasync function askOnboardingPrompt(params: {\n  promptApi?: PromptApi;\n  question: OnboardingPrompt;\n  defaultValue: string | boolean | undefined;\n}): Promise<string | boolean> {\n  const { promptApi, question, defaultValue } = params;\n\n  if (!promptApi) {\n    return getNonInteractiveAnswer(question, defaultValue);\n  }\n\n  if (question.type === \"input\") {\n    const defaultString =\n      typeof defaultValue === \"string\" ? defaultValue : undefined;\n    const answer = await promptApi.input({\n      message: question.message,\n      defaultValue: defaultString,\n    });\n    return sanitizeAnswerString(answer);\n  }\n\n  if (question.type === \"confirm\") {\n    const defaultBool =\n      typeof defaultValue === \"boolean\"\n        ? defaultValue\n        : typeof defaultValue === \"string\"\n        ? [\"true\", \"yes\", \"y\", \"1\"].includes(\n            defaultValue.trim().toLowerCase()\n          )\n        : false;\n\n    return promptApi.confirm({\n      message: question.message,\n      defaultValue: defaultBool,\n    });\n  }\n\n  const choices = question.choices ?? [];\n  if (choices.length === 0) {\n    throw new Error(`Prompt \"${question.key}\" is missing choices.`);\n  }\n\n  const selected = await promptApi.select({\n    message: question.message,\n    choices,\n  });\n\n  return sanitizeAnswerString(selected);\n}\n\nfunction getNonInteractiveAnswer(\n  question: OnboardingPrompt,\n  defaultValue: string | boolean | undefined\n): string | boolean {\n  if (question.type === \"confirm\") {\n    if (typeof defaultValue === \"boolean\") {\n      return defaultValue;\n    }\n    if (typeof defaultValue === \"string\") {\n      const normalized = defaultValue.trim().toLowerCase();\n      if ([\"true\", \"yes\", \"y\", \"1\"].includes(normalized)) return true;\n      if ([\"false\", \"no\", \"n\", \"0\"].includes(normalized)) return false;\n    }\n    return false;\n  }\n\n  if (question.type === \"select\") {\n    if (typeof defaultValue === \"string\" && defaultValue.length > 0) {\n      return sanitizeAnswerString(defaultValue);\n    }\n    const choice = question.choices?.[0];\n    if (!choice) {\n      throw new Error(`Prompt \"${question.key}\" is missing choices.`);\n    }\n    return sanitizeAnswerString(choice.value);\n  }\n\n  if (typeof defaultValue === \"string\") {\n    return sanitizeAnswerString(defaultValue);\n  }\n\n  return \"\";\n}\n\nfunction interpolateTemplateString(\n  template: string,\n  context: Record<string, string>,\n  answers: OnboardingAnswers\n): string {\n  return template.replace(/{{([A-Z0-9_]+)}}/g, (_, token: string) => {\n    const fromAnswers = answers.get(token);\n    if (typeof fromAnswers === \"string\") {\n      return fromAnswers;\n    }\n    if (typeof fromAnswers === \"boolean\") {\n      return fromAnswers ? \"true\" : \"false\";\n    }\n\n    if (Object.prototype.hasOwnProperty.call(context, token)) {\n      return context[token] ?? \"\";\n    }\n\n    const defaultValue =\n      DEFAULT_TEMPLATE_VALUES[token as keyof typeof DEFAULT_TEMPLATE_VALUES];\n    if (typeof defaultValue === \"string\") {\n      return defaultValue;\n    }\n    return \"\";\n  });\n}\n\nfunction sanitizeAnswerString(value: string): string {\n  return value.replace(/\\r/g, \"\").trim();\n}\n\nfunction buildTemplateReplacements(params: {\n  projectDirName: string;\n  packageName: string;\n  answers: OnboardingAnswers;\n}): Record<string, string> {\n  const { projectDirName, packageName, answers } = params;\n\n  const agentDescription = getStringAnswer(\n    answers,\n    \"AGENT_DESCRIPTION\",\n    DEFAULT_TEMPLATE_VALUES.AGENT_DESCRIPTION\n  );\n  const agentVersion = getStringAnswer(\n    answers,\n    \"AGENT_VERSION\",\n    DEFAULT_TEMPLATE_VALUES.AGENT_VERSION\n  );\n  const entrypointKey = toEntrypointKey(\n    getStringAnswer(\n      answers,\n      \"ENTRYPOINT_KEY\",\n      DEFAULT_TEMPLATE_VALUES.ENTRYPOINT_KEY\n    )\n  );\n  const entrypointDescription = getStringAnswer(\n    answers,\n    \"ENTRYPOINT_DESCRIPTION\",\n    DEFAULT_TEMPLATE_VALUES.ENTRYPOINT_DESCRIPTION\n  );\n\n  const enablePayments = getBooleanAnswer(answers, \"ENABLE_PAYMENTS\", false);\n  const paymentsFacilitator = getStringAnswer(\n    answers,\n    \"PAYMENTS_FACILITATOR_URL\",\n    DEFAULT_TEMPLATE_VALUES.PAYMENTS_FACILITATOR_URL\n  );\n  const paymentsNetwork = getStringAnswer(\n    answers,\n    \"PAYMENTS_NETWORK\",\n    DEFAULT_TEMPLATE_VALUES.PAYMENTS_NETWORK\n  );\n  const paymentsPayTo = getStringAnswer(\n    answers,\n    \"PAYMENTS_PAY_TO\",\n    DEFAULT_TEMPLATE_VALUES.PAYMENTS_PAY_TO\n  );\n  const paymentsDefaultPrice = getStringAnswer(\n    answers,\n    \"PAYMENTS_DEFAULT_PRICE\",\n    DEFAULT_TEMPLATE_VALUES.PAYMENTS_DEFAULT_PRICE\n  );\n  const entrypointPrice = getStringAnswer(\n    answers,\n    \"ENTRYPOINT_PRICE\",\n    paymentsDefaultPrice\n  );\n  const walletConnectProjectId = getStringAnswer(\n    answers,\n    \"WALLET_CONNECT_PROJECT_ID\",\n    DEFAULT_TEMPLATE_VALUES.WALLET_CONNECT_PROJECT_ID\n  );\n\n  const agentOptions = enablePayments\n    ? [\n        \"{\",\n        \"  config: {\",\n        \"    payments: {\",\n        `      facilitatorUrl: \"${paymentsFacilitator}\",`,\n        `      payTo: \"${paymentsPayTo}\",`,\n        `      network: \"${paymentsNetwork}\",`,\n        `      defaultPrice: \"${paymentsDefaultPrice}\",`,\n        \"    },\",\n        \"  },\",\n        \"  useConfigPayments: true,\",\n        \"}\",\n      ].join(\"\\n\")\n    : \"{}\";\n\n  const entrypointPriceLine = enablePayments\n    ? `  price: \"${entrypointPrice}\",\\n`\n    : `  // price: \"${entrypointPrice}\",\\n`;\n\n  const entrypointPriceNote = enablePayments\n    ? ` (price: ${entrypointPrice} base units)`\n    : \"\";\n\n  return {\n    APP_NAME: projectDirName,\n    PACKAGE_NAME: packageName,\n    AGENT_DESCRIPTION: agentDescription,\n    AGENT_VERSION: agentVersion,\n    ENTRYPOINT_KEY: entrypointKey,\n    ENTRYPOINT_DESCRIPTION: entrypointDescription,\n    ENTRYPOINT_PRICE: entrypointPrice,\n    ENTRYPOINT_PRICE_LINE: entrypointPriceLine,\n    ENTRYPOINT_PRICE_NOTE: entrypointPriceNote,\n    AGENT_OPTIONS: agentOptions,\n    PAYMENTS_FACILITATOR_URL: paymentsFacilitator,\n    PAYMENTS_NETWORK: paymentsNetwork,\n    PAYMENTS_PAY_TO: paymentsPayTo,\n    PAYMENTS_DEFAULT_PRICE: paymentsDefaultPrice,\n    WALLET_CONNECT_PROJECT_ID: walletConnectProjectId,\n  };\n}\n\nfunction getStringAnswer(\n  answers: OnboardingAnswers,\n  key: string,\n  fallback: string\n): string {\n  const value = answers.get(key);\n  if (typeof value === \"string\" && value.trim().length > 0) {\n    return sanitizeAnswerString(value);\n  }\n  if (typeof value === \"boolean\") {\n    return value ? \"true\" : \"false\";\n  }\n  return fallback;\n}\n\nfunction getBooleanAnswer(\n  answers: OnboardingAnswers,\n  key: string,\n  fallback: boolean\n): boolean {\n  const value = answers.get(key);\n  if (typeof value === \"boolean\") {\n    return value;\n  }\n  if (typeof value === \"string\") {\n    const normalized = value.trim().toLowerCase();\n    if ([\"true\", \"yes\", \"y\", \"1\"].includes(normalized)) return true;\n    if ([\"false\", \"no\", \"n\", \"0\"].includes(normalized)) return false;\n  }\n  return fallback;\n}\n\nfunction toEntrypointKey(value: string): string {\n  const normalized = value\n    .trim()\n    .toLowerCase()\n    .replace(/\\s+/g, \"-\")\n    .replace(/[^a-z0-9._-]/g, \"-\")\n    .replace(/-+/g, \"-\")\n    .replace(/^-+/, \"\")\n    .replace(/-+$/, \"\");\n\n  return normalized.length > 0\n    ? normalized\n    : DEFAULT_TEMPLATE_VALUES.ENTRYPOINT_KEY;\n}\n\nasync function assertTemplatePresent(templatePath: string) {\n  const exists = existsSync(templatePath);\n  if (!exists) {\n    throw new Error(`Template not found at ${templatePath}`);\n  }\n}\n\nasync function assertTargetDirectory(targetDir: string) {\n  try {\n    await fs.mkdir(targetDir, { recursive: true });\n  } catch (error) {\n    if ((error as NodeJS.ErrnoException).code !== \"EEXIST\") {\n      throw error;\n    }\n  }\n\n  const entries = await fs.readdir(targetDir);\n  const filtered = entries.filter((name) => name !== \".DS_Store\");\n  if (filtered.length > 0) {\n    throw new Error(\n      `Target directory ${targetDir} already exists and is not empty.`\n    );\n  }\n}\n\nasync function copyTemplate(templateRoot: string, targetDir: string) {\n  await fs.cp(templateRoot, targetDir, {\n    recursive: true,\n    errorOnExist: false,\n  });\n}\n\nasync function applyTemplateTransforms(\n  targetDir: string,\n  params: {\n    packageName: string;\n    projectDirName: string;\n    replacements: Record<string, string>;\n  }\n) {\n  await updatePackageJson(targetDir, params.packageName);\n\n  const replacements = {\n    APP_NAME: params.projectDirName,\n    PACKAGE_NAME: params.packageName,\n    ...params.replacements,\n  };\n\n  await replaceTemplatePlaceholders(join(targetDir, \"README.md\"), replacements);\n  await replaceTemplatePlaceholders(\n    join(targetDir, \"src/agent.ts\"),\n    replacements\n  );\n  await replaceTemplatePlaceholders(\n    join(targetDir, \".env.example\"),\n    replacements\n  );\n  await replaceTemplatePlaceholders(\n    join(targetDir, \"src/lib/agent.ts\"),\n    replacements\n  );\n\n  await removeTemplateArtifacts(targetDir);\n}\n\nasync function updatePackageJson(targetDir: string, packageName: string) {\n  const packageJsonPath = join(targetDir, \"package.json\");\n  const packageJsonRaw = await fs.readFile(packageJsonPath, \"utf8\");\n  const packageJson = JSON.parse(packageJsonRaw) as Record<string, unknown>;\n  packageJson.name = packageName;\n  await fs.writeFile(\n    packageJsonPath,\n    `${JSON.stringify(packageJson, null, 2)}\\n`,\n    \"utf8\"\n  );\n}\n\nasync function replaceTemplatePlaceholders(\n  filePath: string,\n  replacements: Record<string, string>\n) {\n  try {\n    const raw = await fs.readFile(filePath, \"utf8\");\n    let replaced = raw;\n    for (const [key, value] of Object.entries(replacements)) {\n      replaced = replaced.replaceAll(`{{${key}}}`, value);\n    }\n    if (replaced === raw) {\n      return;\n    }\n    await fs.writeFile(filePath, replaced, \"utf8\");\n  } catch (error) {\n    if ((error as NodeJS.ErrnoException).code !== \"ENOENT\") {\n      throw error;\n    }\n  }\n}\n\nasync function removeTemplateArtifacts(targetDir: string) {\n  const metaPath = join(targetDir, \"template.json\");\n  await fs.rm(metaPath, { force: true });\n}\n\nasync function setupEnvironment(params: {\n  targetDir: string;\n  envMode: CliOptions[\"envMode\"];\n  prompt?: PromptApi;\n  logger: RunLogger;\n}) {\n  const { targetDir, envMode, prompt, logger } = params;\n  const examplePath = join(targetDir, \".env.example\");\n  const envPath = join(targetDir, \".env\");\n\n  const exampleExists = existsSync(examplePath);\n  if (!exampleExists) {\n    return;\n  }\n\n  if (envMode === \"no\") {\n    logger.log(\"Skipping env setup (requested).\");\n    return;\n  }\n\n  if (envMode === \"yes\") {\n    await fs.copyFile(examplePath, envPath);\n    logger.log(\"Generated .env from .env.example.\");\n    return;\n  }\n\n  if (!prompt) {\n    logger.log(\"Skipping env setup (non-interactive).\");\n    return;\n  }\n\n  const shouldCreate = await prompt.confirm({\n    message: \"Create a .env file now?\",\n    defaultValue: true,\n  });\n\n  if (!shouldCreate) {\n    logger.log(\"Skipping env setup.\");\n    return;\n  }\n\n  const templateContent = await fs.readFile(examplePath, \"utf8\");\n  const entries = parseEnvTemplate(templateContent);\n  const answers = new Map<string, string>();\n\n  for (const entry of entries) {\n    if (entry.type !== \"entry\") continue;\n    const response = await prompt.input({\n      message: `${entry.key}`,\n      defaultValue: entry.value ?? \"\",\n    });\n    answers.set(entry.key, response);\n  }\n\n  const rendered = renderEnvTemplate(entries, answers);\n  await fs.writeFile(envPath, rendered, \"utf8\");\n  logger.log(\"Created .env with your values.\");\n}\n\ntype EnvTemplateEntry =\n  | { type: \"entry\"; key: string; value?: string }\n  | { type: \"comment\"; raw: string }\n  | { type: \"other\"; raw: string };\n\nfunction parseEnvTemplate(content: string): EnvTemplateEntry[] {\n  const lines = content.split(/\\r?\\n/);\n  return lines.map((line) => {\n    const trimmed = line.trim();\n    if (trimmed.startsWith(\"#\") || trimmed === \"\") {\n      return { type: \"comment\", raw: line } as EnvTemplateEntry;\n    }\n    const eqIndex = line.indexOf(\"=\");\n    if (eqIndex === -1) {\n      return { type: \"other\", raw: line };\n    }\n\n    const key = line.slice(0, eqIndex).trim();\n    const value = line.slice(eqIndex + 1);\n    return { type: \"entry\", key, value };\n  });\n}\n\nfunction renderEnvTemplate(\n  entries: EnvTemplateEntry[],\n  answers: Map<string, string>\n) {\n  return (\n    entries\n      .map((entry) => {\n        if (entry.type === \"entry\") {\n          const answer = answers.get(entry.key) ?? entry.value ?? \"\";\n          return `${entry.key}=${answer}`;\n        }\n        return entry.raw;\n      })\n      .join(\"\\n\") + \"\\n\"\n  );\n}\n\nasync function runInstall(cwd: string, logger: RunLogger) {\n  logger.log(\"Running `bun install`...\");\n  try {\n    await new Promise<void>((resolve, reject) => {\n      const child = spawn(\"bun\", [\"install\"], {\n        cwd,\n        stdio: \"inherit\",\n      });\n\n      child.on(\"error\", (error) => reject(error));\n      child.on(\"exit\", (code) => {\n        if (code === 0) {\n          resolve();\n        } else {\n          reject(\n            new Error(`bun install exited with code ${code ?? \"unknown\"}`)\n          );\n        }\n      });\n    });\n  } catch (error) {\n    logger.warn(\n      \"âš ï¸  Failed to run `bun install`. Please install dependencies manually.\"\n    );\n  }\n}\n\nfunction createInteractivePrompt(logger: RunLogger): PromptApi | undefined {\n  if (!defaultInput.isTTY || !defaultOutput.isTTY) {\n    return undefined;\n  }\n\n  const rl = createInterface({\n    input: defaultInput,\n    output: defaultOutput,\n  });\n\n  return {\n    async select({ message, choices }) {\n      logger.log(message);\n      choices.forEach((choice, index) => {\n        const detail = choice.description ? ` â€“ ${choice.description}` : \"\";\n        logger.log(`  ${index + 1}. ${choice.title}${detail}`);\n      });\n      const range = `1-${choices.length}`;\n      while (true) {\n        const answer = await rl.question(`Select an option [${range}]: `);\n        const parsed = Number.parseInt(answer, 10);\n        if (\n          Number.isInteger(parsed) &&\n          parsed >= 1 &&\n          parsed <= choices.length\n        ) {\n          return choices[parsed - 1]!.value;\n        }\n        logger.log(\"Please enter a valid option number.\");\n      }\n    },\n    async confirm({ message, defaultValue = true }) {\n      const suffix = defaultValue ? \"Y/n\" : \"y/N\";\n      while (true) {\n        const answer = await rl.question(`${message} (${suffix}) `);\n        const normalized = answer.trim().toLowerCase();\n        if (normalized === \"\" && defaultValue !== undefined) {\n          return defaultValue;\n        }\n        if ([\"y\", \"yes\"].includes(normalized)) return true;\n        if ([\"n\", \"no\"].includes(normalized)) return false;\n        logger.log(\"Please respond with y or n.\");\n      }\n    },\n    async input({ message, defaultValue = \"\" }) {\n      const promptMessage =\n        defaultValue && defaultValue.length > 0\n          ? `${message} (${defaultValue}): `\n          : `${message}: `;\n      const answer = await rl.question(promptMessage);\n      return answer === \"\" ? defaultValue : answer;\n    },\n    async close() {\n      await rl.close();\n    },\n  };\n}\n\nasync function main() {\n  const prompt = createInteractivePrompt(defaultLogger);\n  try {\n    await runCli(process.argv.slice(2), {\n      prompt,\n    });\n  } catch (error) {\n    defaultLogger.error(`\\nError: ${(error as Error).message}`);\n    process.exit(1);\n  } finally {\n    await prompt?.close?.();\n  }\n}\n\nconst isCliEntryPoint = (() => {\n  if (!process.argv[1]) {\n    return false;\n  }\n  try {\n    const entryPath = realpathSync(process.argv[1]);\n    const modulePath = realpathSync(fileURLToPath(import.meta.url));\n    return entryPath === modulePath;\n  } catch {\n    return false;\n  }\n})();\n\nif (isCliEntryPoint) {\n  // eslint-disable-next-line @typescript-eslint/no-floating-promises\n  main();\n}\n"]}