{"version":3,"sources":["../src/utils/signatures.ts","../src/utils/address.ts","../src/utils/domain.ts","../src/config/erc8004.ts","../src/abi/IdentityRegistry.json","../src/abi/ReputationRegistry.json","../src/abi/ValidationRegistry.json","../src/abi/types.ts","../src/registries/identity.ts","../src/registries/reputation.ts","../src/registries/validation.ts","../src/init.ts"],"names":["signDomainProof","options"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Signature helpers using Viem's proper action functions.\n * Supports EIP-191 (personal_sign) and EIP-712 (typed data) signing.\n */\n\nimport type {\n  WalletClient,\n  PublicClient,\n  Account,\n  Chain,\n  Transport,\n} from \"viem\";\nimport type { Hex } from \"./types\";\nimport { signMessage, signTypedData, verifyMessage } from \"viem/actions\";\nimport { hashMessage, recoverMessageAddress } from \"viem\";\n\n/**\n * Viem WalletClient type for signature operations\n * Accepts any WalletClient with an account\n */\nexport type SignerWalletClient = WalletClient & { account: Account };\n\n/**\n * Sign a message using EIP-191 (personal_sign)\n * This is the standard way to sign plain text messages\n */\nexport async function signMessageWithViem(\n  walletClient: SignerWalletClient,\n  message: string\n): Promise<Hex> {\n  return signMessage(walletClient as any, {\n    account: walletClient.account,\n    message,\n  });\n}\n\n/**\n * Sign typed data using EIP-712\n * More structured and safer than plain message signing\n */\nexport async function signTypedDataWithViem<\n  const TTypedData extends Record<string, unknown>,\n  TPrimaryType extends string\n>(\n  walletClient: SignerWalletClient,\n  params: {\n    domain: {\n      name: string;\n      version: string;\n      chainId: number;\n      verifyingContract: Hex;\n    };\n    types: TTypedData;\n    primaryType: TPrimaryType;\n    message: Record<string, unknown>;\n  }\n): Promise<Hex> {\n  return signTypedData(\n    walletClient as any,\n    {\n      account: walletClient.account,\n      ...params,\n    } as any\n  );\n}\n\n/**\n * Verify a signature from either EOA or smart contract wallet\n * Handles both EIP-191 and ERC-1271 automatically\n */\nexport async function verifySignature(params: {\n  address: Hex;\n  message: string;\n  signature: Hex;\n  publicClient: {\n    verifyMessage: typeof verifyMessage;\n  };\n}): Promise<boolean> {\n  try {\n    // First try to recover address (works for EOA wallets)\n    const recovered = await recoverMessageAddress({\n      message: params.message,\n      signature: params.signature,\n    });\n\n    if (recovered.toLowerCase() === params.address.toLowerCase()) {\n      return true;\n    }\n\n    // Fallback to ERC-1271 for smart contract wallets\n    return await verifyMessage(params.publicClient as any, {\n      address: params.address,\n      message: params.message,\n      signature: params.signature,\n    });\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Hash a message according to EIP-191\n * Useful for debugging or manual signature verification\n */\nexport function hashMessageEIP191(message: string): Hex {\n  return hashMessage(message);\n}\n\n/**\n * Recover the address that signed a message\n * Only works for EOA wallets (not smart contract wallets)\n */\nexport async function recoverSigner(\n  message: string,\n  signature: Hex\n): Promise<Hex> {\n  return recoverMessageAddress({\n    message,\n    signature,\n  });\n}\n\n/**\n * Build ERC-8004 domain ownership proof message\n */\nexport function buildDomainProofMessage(params: {\n  domain: string;\n  address: Hex;\n  chainId: number;\n  nonce?: string;\n}): string {\n  const lines = [\n    \"ERC-8004 Agent Ownership Proof\",\n    `Domain: ${params.domain}`,\n    `Address: ${params.address.toLowerCase()}`,\n    `ChainId: ${params.chainId}`,\n  ];\n  if (params.nonce) {\n    lines.push(`Nonce: ${params.nonce}`);\n  }\n  return lines.join(\"\\n\");\n}\n\n/**\n * Build ERC-8004 feedback authorization message\n */\nexport function buildFeedbackAuthMessage(params: {\n  fromAddress: Hex;\n  toAgentId: bigint;\n  score: number;\n  chainId: number;\n  expiry: number;\n  indexLimit: bigint;\n}): string {\n  return [\n    \"ERC-8004 Reputation Feedback Authorization\",\n    `From: ${params.fromAddress.toLowerCase()}`,\n    `To Agent: ${params.toAgentId.toString()}`,\n    `Score: ${params.score}`,\n    `Chain ID: ${params.chainId}`,\n    `Expiry: ${params.expiry}`,\n    `Index Limit: ${params.indexLimit.toString()}`,\n  ].join(\"\\n\");\n}\n\n/**\n * Build ERC-8004 validation request message\n */\nexport function buildValidationRequestMessage(params: {\n  agentId: bigint;\n  requestHash: Hex;\n  validator: Hex;\n  chainId: number;\n  timestamp: number;\n}): string {\n  return [\n    \"ERC-8004 Validation Request\",\n    `Agent ID: ${params.agentId.toString()}`,\n    `Request Hash: ${params.requestHash}`,\n    `Validator: ${params.validator.toLowerCase()}`,\n    `Chain ID: ${params.chainId}`,\n    `Timestamp: ${params.timestamp}`,\n  ].join(\"\\n\");\n}\n\n/**\n * Sign ERC-8004 domain proof using Viem\n */\nexport async function signDomainProof(\n  walletClient: SignerWalletClient,\n  params: {\n    domain: string;\n    address: Hex;\n    chainId: number;\n    nonce?: string;\n  }\n): Promise<Hex> {\n  const message = buildDomainProofMessage(params);\n  return signMessageWithViem(walletClient, message);\n}\n\n/**\n * Sign ERC-8004 feedback authorization using Viem\n */\nexport async function signFeedbackAuth(\n  walletClient: SignerWalletClient,\n  params: {\n    fromAddress: Hex;\n    toAgentId: bigint;\n    score: number;\n    chainId: number;\n    expiry: number;\n    indexLimit: bigint;\n  }\n): Promise<Hex> {\n  const message = buildFeedbackAuthMessage(params);\n  return signMessageWithViem(walletClient, message);\n}\n\n/**\n * Sign ERC-8004 validation request using Viem\n */\nexport async function signValidationRequest(\n  walletClient: SignerWalletClient,\n  params: {\n    agentId: bigint;\n    requestHash: Hex;\n    validator: Hex;\n    chainId: number;\n    timestamp: number;\n  }\n): Promise<Hex> {\n  const message = buildValidationRequestMessage(params);\n  return signMessageWithViem(walletClient, message);\n}\n","/**\n * Address normalization and CAIP-10 utilities\n */\n\nimport type { Hex } from \"./types\";\n\nexport const ZERO_ADDRESS: Hex = \"0x0000000000000000000000000000000000000000\";\n\n/**\n * Normalize an Ethereum address to lowercase hex format\n * Throws if the address is invalid\n */\nexport function normalizeAddress(value: string | null | undefined): Hex {\n  if (!value) {\n    throw new Error(\"invalid hex address\");\n  }\n  const trimmed = value.trim();\n  if (!/^0x[0-9a-fA-F]{40}$/.test(trimmed)) {\n    throw new Error(`invalid hex address: ${value}`);\n  }\n  return trimmed.toLowerCase() as Hex;\n}\n\n/**\n * Sanitize an address - returns ZERO_ADDRESS if invalid instead of throwing\n */\nexport function sanitizeAddress(value: string | null | undefined): Hex {\n  if (!value) return ZERO_ADDRESS;\n  try {\n    return normalizeAddress(value);\n  } catch {\n    return ZERO_ADDRESS;\n  }\n}\n\n/**\n * Convert address to CAIP-10 format (Chain Agnostic Improvement Proposal)\n * Format: {namespace}:{chainId}:{address}\n * Example: \"eip155:1:0x1234...\"\n */\nexport function toCaip10(params: {\n  namespace?: string;\n  chainId: number | string;\n  address: string;\n}): string {\n  const namespace = params.namespace ?? \"eip155\";\n  const chainRef =\n    typeof params.chainId === \"number\"\n      ? params.chainId.toString(10)\n      : `${params.chainId ?? \"\"}`;\n  if (!chainRef) throw new Error(\"chainId is required for CAIP-10\");\n  const address = normalizeAddress(params.address);\n  return `${namespace}:${chainRef}:${address}`;\n}\n\n","/**\n * Domain normalization utilities\n */\n\n/**\n * Normalize a domain to lowercase, trimmed format\n */\nexport function normalizeDomain(domain: string): string {\n  return domain?.trim?.().toLowerCase?.() ?? \"\";\n}\n\n","/**\n * ERC-8004 v1.0 Configuration\n * Contract addresses and constants\n */\n\nimport type { Hex } from \"../utils\";\n\n/**\n * Default ERC-8004 registry addresses (CREATE2 deterministic)\n *\n * These addresses are deployed via CREATE2, ensuring the same address across chains.\n * They are deterministic and can be verified on any EVM-compatible network.\n *\n * Reference: https://github.com/ChaosChain/trustless-agents-erc-ri\n */\nconst DEFAULT_ADDRESSES = {\n  /**\n   * Identity Registry - ERC-721 NFTs representing agent identities\n   * Functions: register(), ownerOf(), tokenURI(), agentExists()\n   */\n  IDENTITY_REGISTRY: \"0x7177a6867296406881E20d6647232314736Dd09A\" as Hex,\n\n  /**\n   * Reputation Registry - Peer feedback and reputation system\n   * Functions: giveFeedback(), revokeFeedback(), getSummary(), getAllFeedback()\n   */\n  REPUTATION_REGISTRY: \"0xB5048e3ef1DA4E04deB6f7d0423D06F63869e322\" as Hex,\n\n  /**\n   * Validation Registry - Validation requests and responses\n   * Functions: validationRequest(), validationResponse(), getRequest(), getSummary()\n   */\n  VALIDATION_REGISTRY: \"0x662b40A526cb4017d947e71eAF6753BF3eeE66d8\" as Hex,\n} as const;\n\n/**\n * Chain-specific overrides for registries with different addresses\n *\n * Only add entries here if a specific chain has different addresses\n * than the deterministic CREATE2 defaults above.\n */\nconst CHAIN_OVERRIDES: Partial<\n  Record<number, Partial<typeof DEFAULT_ADDRESSES>>\n> = {\n  // Example: If a chain has different registry addresses\n  // 42161: {\n  //   IDENTITY_REGISTRY: \"0xDifferentAddress...\" as Hex,\n  // },\n} as const;\n\n/**\n * Supported chain IDs for ERC-8004 registries\n */\nexport const SUPPORTED_CHAINS = {\n  BASE_SEPOLIA: 84532,\n  ETHEREUM_MAINNET: 1,\n  SEPOLIA: 11155111,\n  BASE_MAINNET: 8453,\n  ARBITRUM: 42161,\n  OPTIMISM: 10,\n  POLYGON: 137,\n  POLYGON_AMOY: 80002,\n} as const;\n\nexport type SupportedChainId =\n  (typeof SUPPORTED_CHAINS)[keyof typeof SUPPORTED_CHAINS];\n\n/**\n * Default network configuration\n */\nexport const DEFAULT_CHAIN_ID = 84532; // Base Sepolia\nexport const DEFAULT_NAMESPACE = \"eip155\"; // EVM chains\n\n/**\n * Default trust models supported by ERC-8004\n */\nexport const DEFAULT_TRUST_MODELS: string[] = [\n  \"feedback\",\n  \"inference-validation\",\n];\n\n/**\n * Get all registry addresses for a specific chain\n * Returns default addresses with any chain-specific overrides applied\n */\nexport function getRegistryAddresses(\n  chainId: number\n): typeof DEFAULT_ADDRESSES {\n  const overrides = CHAIN_OVERRIDES[chainId] ?? {};\n  return { ...DEFAULT_ADDRESSES, ...overrides };\n}\n\n/**\n * Get a specific registry address for a chain\n */\nexport function getRegistryAddress(\n  registry: \"identity\" | \"reputation\" | \"validation\",\n  chainId: number\n): Hex {\n  const addresses = getRegistryAddresses(chainId);\n\n  switch (registry) {\n    case \"identity\":\n      return addresses.IDENTITY_REGISTRY;\n    case \"reputation\":\n      return addresses.REPUTATION_REGISTRY;\n    case \"validation\":\n      return addresses.VALIDATION_REGISTRY;\n  }\n}\n\n/**\n * Check if a chain ID is supported by the ERC-8004 registries\n */\nexport function isChainSupported(chainId: number): boolean {\n  return Object.values(SUPPORTED_CHAINS).includes(chainId as SupportedChainId);\n}\n\n/**\n * Verify if an address is a valid ERC-8004 registry on any supported chain\n */\nexport function isERC8004Registry(address: Hex, chainId?: number): boolean {\n  const normalized = address.toLowerCase();\n\n  if (chainId !== undefined) {\n    // Check specific chain\n    const addresses = getRegistryAddresses(chainId);\n    return Object.values(addresses).some(\n      (addr) => addr.toLowerCase() === normalized\n    );\n  }\n\n  // Check all supported chains\n  const chains = Object.values(SUPPORTED_CHAINS);\n  return chains.some((cid) => {\n    const addresses = getRegistryAddresses(cid);\n    return Object.values(addresses).some(\n      (addr) => addr.toLowerCase() === normalized\n    );\n  });\n}\n","[\n  { \"inputs\": [], \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"approved\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Approval\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"operator\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bool\",\n        \"name\": \"approved\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"ApprovalForAll\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"agentId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"string\",\n        \"name\": \"indexedKey\",\n        \"type\": \"string\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"key\",\n        \"type\": \"string\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes\",\n        \"name\": \"value\",\n        \"type\": \"bytes\"\n      }\n    ],\n    \"name\": \"MetadataSet\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"agentId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"tokenURI\",\n        \"type\": \"string\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"Registered\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Transfer\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" }\n    ],\n    \"name\": \"agentExists\",\n    \"outputs\": [{ \"internalType\": \"bool\", \"name\": \"exists\", \"type\": \"bool\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" },\n      { \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }\n    ],\n    \"name\": \"approve\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"address\", \"name\": \"owner\", \"type\": \"address\" }\n    ],\n    \"name\": \"balanceOf\",\n    \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }\n    ],\n    \"name\": \"getApproved\",\n    \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"string\", \"name\": \"key\", \"type\": \"string\" }\n    ],\n    \"name\": \"getMetadata\",\n    \"outputs\": [{ \"internalType\": \"bytes\", \"name\": \"value\", \"type\": \"bytes\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"address\", \"name\": \"owner\", \"type\": \"address\" },\n      { \"internalType\": \"address\", \"name\": \"operator\", \"type\": \"address\" }\n    ],\n    \"name\": \"isApprovedForAll\",\n    \"outputs\": [{ \"internalType\": \"bool\", \"name\": \"\", \"type\": \"bool\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"name\",\n    \"outputs\": [{ \"internalType\": \"string\", \"name\": \"\", \"type\": \"string\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }\n    ],\n    \"name\": \"ownerOf\",\n    \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"register\",\n    \"outputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" }\n    ],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"string\", \"name\": \"tokenURI_\", \"type\": \"string\" },\n      {\n        \"components\": [\n          { \"internalType\": \"string\", \"name\": \"key\", \"type\": \"string\" },\n          { \"internalType\": \"bytes\", \"name\": \"value\", \"type\": \"bytes\" }\n        ],\n        \"internalType\": \"struct IIdentityRegistry.MetadataEntry[]\",\n        \"name\": \"metadata\",\n        \"type\": \"tuple[]\"\n      }\n    ],\n    \"name\": \"register\",\n    \"outputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" }\n    ],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"string\", \"name\": \"tokenURI_\", \"type\": \"string\" }\n    ],\n    \"name\": \"register\",\n    \"outputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" }\n    ],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"address\", \"name\": \"from\", \"type\": \"address\" },\n      { \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" },\n      { \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }\n    ],\n    \"name\": \"safeTransferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"address\", \"name\": \"from\", \"type\": \"address\" },\n      { \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" },\n      { \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" },\n      { \"internalType\": \"bytes\", \"name\": \"data\", \"type\": \"bytes\" }\n    ],\n    \"name\": \"safeTransferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"address\", \"name\": \"operator\", \"type\": \"address\" },\n      { \"internalType\": \"bool\", \"name\": \"approved\", \"type\": \"bool\" }\n    ],\n    \"name\": \"setApprovalForAll\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"string\", \"name\": \"key\", \"type\": \"string\" },\n      { \"internalType\": \"bytes\", \"name\": \"value\", \"type\": \"bytes\" }\n    ],\n    \"name\": \"setMetadata\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"bytes4\", \"name\": \"interfaceId\", \"type\": \"bytes4\" }\n    ],\n    \"name\": \"supportsInterface\",\n    \"outputs\": [{ \"internalType\": \"bool\", \"name\": \"\", \"type\": \"bool\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"symbol\",\n    \"outputs\": [{ \"internalType\": \"string\", \"name\": \"\", \"type\": \"string\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }\n    ],\n    \"name\": \"tokenURI\",\n    \"outputs\": [{ \"internalType\": \"string\", \"name\": \"\", \"type\": \"string\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"totalAgents\",\n    \"outputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"count\", \"type\": \"uint256\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"address\", \"name\": \"from\", \"type\": \"address\" },\n      { \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" },\n      { \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }\n    ],\n    \"name\": \"transferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  }\n]\n","[\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"_identityRegistry\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"constructor\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"agentId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"clientAddress\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"feedbackIndex\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"FeedbackRevoked\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"agentId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"clientAddress\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint8\",\n        \"name\": \"score\",\n        \"type\": \"uint8\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"bytes32\",\n        \"name\": \"tag1\",\n        \"type\": \"bytes32\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"tag2\",\n        \"type\": \"bytes32\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"fileuri\",\n        \"type\": \"string\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"filehash\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"NewFeedback\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"agentId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"clientAddress\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint64\",\n        \"name\": \"feedbackIndex\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"responder\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"responseUri\",\n        \"type\": \"string\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"responseHash\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"ResponseAppended\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"address\", \"name\": \"clientAddress\", \"type\": \"address\" },\n      { \"internalType\": \"uint64\", \"name\": \"feedbackIndex\", \"type\": \"uint64\" },\n      { \"internalType\": \"string\", \"name\": \"responseUri\", \"type\": \"string\" },\n      { \"internalType\": \"bytes32\", \"name\": \"responseHash\", \"type\": \"bytes32\" }\n    ],\n    \"name\": \"appendResponse\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" }\n    ],\n    \"name\": \"getClients\",\n    \"outputs\": [\n      { \"internalType\": \"address[]\", \"name\": \"clientList\", \"type\": \"address[]\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"getIdentityRegistry\",\n    \"outputs\": [\n      { \"internalType\": \"address\", \"name\": \"registry\", \"type\": \"address\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"address\", \"name\": \"clientAddress\", \"type\": \"address\" }\n    ],\n    \"name\": \"getLastIndex\",\n    \"outputs\": [\n      { \"internalType\": \"uint64\", \"name\": \"lastIndex\", \"type\": \"uint64\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"address\", \"name\": \"clientAddress\", \"type\": \"address\" },\n      { \"internalType\": \"uint64\", \"name\": \"feedbackIndex\", \"type\": \"uint64\" },\n      { \"internalType\": \"address[]\", \"name\": \"responders\", \"type\": \"address[]\" }\n    ],\n    \"name\": \"getResponseCount\",\n    \"outputs\": [\n      { \"internalType\": \"uint64\", \"name\": \"count\", \"type\": \"uint64\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      {\n        \"internalType\": \"address[]\",\n        \"name\": \"clientAddresses\",\n        \"type\": \"address[]\"\n      },\n      { \"internalType\": \"bytes32\", \"name\": \"tag1\", \"type\": \"bytes32\" },\n      { \"internalType\": \"bytes32\", \"name\": \"tag2\", \"type\": \"bytes32\" }\n    ],\n    \"name\": \"getSummary\",\n    \"outputs\": [\n      { \"internalType\": \"uint64\", \"name\": \"count\", \"type\": \"uint64\" },\n      { \"internalType\": \"uint8\", \"name\": \"averageScore\", \"type\": \"uint8\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"uint8\", \"name\": \"score\", \"type\": \"uint8\" },\n      { \"internalType\": \"bytes32\", \"name\": \"tag1\", \"type\": \"bytes32\" },\n      { \"internalType\": \"bytes32\", \"name\": \"tag2\", \"type\": \"bytes32\" },\n      { \"internalType\": \"string\", \"name\": \"fileuri\", \"type\": \"string\" },\n      { \"internalType\": \"bytes32\", \"name\": \"filehash\", \"type\": \"bytes32\" },\n      { \"internalType\": \"bytes\", \"name\": \"feedbackAuth\", \"type\": \"bytes\" }\n    ],\n    \"name\": \"giveFeedback\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"identityRegistry\",\n    \"outputs\": [\n      {\n        \"internalType\": \"contract IdentityRegistry\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      {\n        \"internalType\": \"address[]\",\n        \"name\": \"clientAddresses\",\n        \"type\": \"address[]\"\n      },\n      { \"internalType\": \"bytes32\", \"name\": \"tag1\", \"type\": \"bytes32\" },\n      { \"internalType\": \"bytes32\", \"name\": \"tag2\", \"type\": \"bytes32\" },\n      { \"internalType\": \"bool\", \"name\": \"includeRevoked\", \"type\": \"bool\" }\n    ],\n    \"name\": \"readAllFeedback\",\n    \"outputs\": [\n      { \"internalType\": \"address[]\", \"name\": \"clients\", \"type\": \"address[]\" },\n      { \"internalType\": \"uint8[]\", \"name\": \"scores\", \"type\": \"uint8[]\" },\n      { \"internalType\": \"bytes32[]\", \"name\": \"tag1s\", \"type\": \"bytes32[]\" },\n      { \"internalType\": \"bytes32[]\", \"name\": \"tag2s\", \"type\": \"bytes32[]\" },\n      { \"internalType\": \"bool[]\", \"name\": \"revokedStatuses\", \"type\": \"bool[]\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"address\", \"name\": \"clientAddress\", \"type\": \"address\" },\n      { \"internalType\": \"uint64\", \"name\": \"index\", \"type\": \"uint64\" }\n    ],\n    \"name\": \"readFeedback\",\n    \"outputs\": [\n      { \"internalType\": \"uint8\", \"name\": \"score\", \"type\": \"uint8\" },\n      { \"internalType\": \"bytes32\", \"name\": \"tag1\", \"type\": \"bytes32\" },\n      { \"internalType\": \"bytes32\", \"name\": \"tag2\", \"type\": \"bytes32\" },\n      { \"internalType\": \"bool\", \"name\": \"isRevoked\", \"type\": \"bool\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"uint64\", \"name\": \"feedbackIndex\", \"type\": \"uint64\" }\n    ],\n    \"name\": \"revokeFeedback\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  }\n]\n","[\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"_identityRegistry\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"constructor\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"validatorAddress\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"agentId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"requestUri\",\n        \"type\": \"string\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"bytes32\",\n        \"name\": \"requestHash\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"ValidationRequest\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"validatorAddress\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"agentId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"bytes32\",\n        \"name\": \"requestHash\",\n        \"type\": \"bytes32\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint8\",\n        \"name\": \"response\",\n        \"type\": \"uint8\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"responseUri\",\n        \"type\": \"string\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"responseHash\",\n        \"type\": \"bytes32\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"tag\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"ValidationResponse\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" }\n    ],\n    \"name\": \"getAgentValidations\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bytes32[]\",\n        \"name\": \"requestHashes\",\n        \"type\": \"bytes32[]\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"getIdentityRegistry\",\n    \"outputs\": [\n      { \"internalType\": \"address\", \"name\": \"registry\", \"type\": \"address\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"bytes32\", \"name\": \"requestHash\", \"type\": \"bytes32\" }\n    ],\n    \"name\": \"getRequest\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"validatorAddress\",\n        \"type\": \"address\"\n      },\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"string\", \"name\": \"requestUri\", \"type\": \"string\" },\n      { \"internalType\": \"uint256\", \"name\": \"timestamp\", \"type\": \"uint256\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      {\n        \"internalType\": \"address[]\",\n        \"name\": \"validatorAddresses\",\n        \"type\": \"address[]\"\n      },\n      { \"internalType\": \"bytes32\", \"name\": \"tag\", \"type\": \"bytes32\" }\n    ],\n    \"name\": \"getSummary\",\n    \"outputs\": [\n      { \"internalType\": \"uint64\", \"name\": \"count\", \"type\": \"uint64\" },\n      { \"internalType\": \"uint8\", \"name\": \"avgResponse\", \"type\": \"uint8\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"bytes32\", \"name\": \"requestHash\", \"type\": \"bytes32\" }\n    ],\n    \"name\": \"getValidationStatus\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"validatorAddress\",\n        \"type\": \"address\"\n      },\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"uint8\", \"name\": \"response\", \"type\": \"uint8\" },\n      { \"internalType\": \"bytes32\", \"name\": \"tag\", \"type\": \"bytes32\" },\n      { \"internalType\": \"uint256\", \"name\": \"lastUpdate\", \"type\": \"uint256\" }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"validatorAddress\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"getValidatorRequests\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bytes32[]\",\n        \"name\": \"requestHashes\",\n        \"type\": \"bytes32[]\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"identityRegistry\",\n    \"outputs\": [\n      {\n        \"internalType\": \"contract IdentityRegistry\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"bytes32\", \"name\": \"requestHash\", \"type\": \"bytes32\" }\n    ],\n    \"name\": \"requestExists\",\n    \"outputs\": [{ \"internalType\": \"bool\", \"name\": \"exists\", \"type\": \"bool\" }],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"validatorAddress\",\n        \"type\": \"address\"\n      },\n      { \"internalType\": \"uint256\", \"name\": \"agentId\", \"type\": \"uint256\" },\n      { \"internalType\": \"string\", \"name\": \"requestUri\", \"type\": \"string\" },\n      { \"internalType\": \"bytes32\", \"name\": \"requestHash\", \"type\": \"bytes32\" }\n    ],\n    \"name\": \"validationRequest\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      { \"internalType\": \"bytes32\", \"name\": \"requestHash\", \"type\": \"bytes32\" },\n      { \"internalType\": \"uint8\", \"name\": \"response\", \"type\": \"uint8\" },\n      { \"internalType\": \"string\", \"name\": \"responseUri\", \"type\": \"string\" },\n      { \"internalType\": \"bytes32\", \"name\": \"responseHash\", \"type\": \"bytes32\" },\n      { \"internalType\": \"bytes32\", \"name\": \"tag\", \"type\": \"bytes32\" }\n    ],\n    \"name\": \"validationResponse\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  }\n]\n","import type { Abi, ContractFunctionName } from \"viem\";\nimport identityRegistryAbiJson from \"./IdentityRegistry.json\";\nimport reputationRegistryAbiJson from \"./ReputationRegistry.json\";\nimport validationRegistryAbiJson from \"./ValidationRegistry.json\";\n\n/**\n * ERC-8004 Identity Registry ABI\n * Typed as viem's Abi for proper type inference with contract interactions\n */\nexport const IDENTITY_REGISTRY_ABI = identityRegistryAbiJson as Abi;\n\n/**\n * ERC-8004 Reputation Registry ABI\n * Handles peer feedback and reputation system\n */\nexport const REPUTATION_REGISTRY_ABI = reputationRegistryAbiJson as Abi;\n\n/**\n * ERC-8004 Validation Registry ABI\n * Handles validation requests and responses\n */\nexport const VALIDATION_REGISTRY_ABI = validationRegistryAbiJson as Abi;\n\n/**\n * Valid read function names extracted from the Identity Registry ABI\n * Includes all view/pure functions from the contract\n */\nexport type IdentityRegistryReadFunctionName = ContractFunctionName<\n  typeof IDENTITY_REGISTRY_ABI,\n  \"view\" | \"pure\"\n>;\n\n/**\n * Valid write function names extracted from the Identity Registry ABI\n * Includes all nonpayable/payable functions from the contract\n */\nexport type IdentityRegistryWriteFunctionName = ContractFunctionName<\n  typeof IDENTITY_REGISTRY_ABI,\n  \"nonpayable\" | \"payable\"\n>;\n\n/**\n * Valid read function names for Reputation Registry\n */\nexport type ReputationRegistryReadFunctionName = ContractFunctionName<\n  typeof REPUTATION_REGISTRY_ABI,\n  \"view\" | \"pure\"\n>;\n\n/**\n * Valid write function names for Reputation Registry\n */\nexport type ReputationRegistryWriteFunctionName = ContractFunctionName<\n  typeof REPUTATION_REGISTRY_ABI,\n  \"nonpayable\" | \"payable\"\n>;\n\n/**\n * Valid read function names for Validation Registry\n */\nexport type ValidationRegistryReadFunctionName = ContractFunctionName<\n  typeof VALIDATION_REGISTRY_ABI,\n  \"view\" | \"pure\"\n>;\n\n/**\n * Valid write function names for Validation Registry\n */\nexport type ValidationRegistryWriteFunctionName = ContractFunctionName<\n  typeof VALIDATION_REGISTRY_ABI,\n  \"nonpayable\" | \"payable\"\n>;\n","import type { TrustConfig, RegistrationEntry } from \"../types\";\nimport {\n  ZERO_ADDRESS,\n  normalizeAddress,\n  normalizeDomain,\n  toCaip10,\n} from \"../utils\";\nimport type { Hex } from \"../utils\";\nexport { toCaip10 } from \"../utils\";\n\nimport { IDENTITY_REGISTRY_ABI } from \"../abi/types\";\nimport type {\n  IdentityRegistryReadFunctionName,\n  IdentityRegistryWriteFunctionName,\n} from \"../abi/types\";\nimport {\n  DEFAULT_CHAIN_ID,\n  DEFAULT_NAMESPACE,\n  DEFAULT_TRUST_MODELS,\n} from \"../config\";\n\nexport type IdentityRegistryClientOptions<\n  PublicClient extends PublicClientLike,\n  WalletClient extends WalletClientLike | undefined = undefined\n> = {\n  address: Hex;\n  chainId?: number;\n  publicClient: PublicClient;\n  walletClient?: WalletClient;\n  namespace?: string;\n};\n\n/**\n * Identity record for an ERC-8004 agent\n * In v1.0, agents are ERC-721 NFTs with metadata stored off-chain\n */\nexport type IdentityRecord = {\n  agentId: bigint;\n  owner: Hex;\n  tokenURI: string;\n};\n\ntype AgentIdentifierInput = bigint | number | string;\n\ntype RegistrationEntryParams = {\n  agentId: AgentIdentifierInput;\n  address: string;\n  chainId: number | string;\n  namespace?: string;\n  signature?: string;\n};\n\ntype TrustOverridesInput = Partial<\n  Pick<\n    TrustConfig,\n    | \"trustModels\"\n    | \"validationRequestsUri\"\n    | \"validationResponsesUri\"\n    | \"feedbackDataUri\"\n  >\n>;\n\nfunction normalizeAgentId(agentId: AgentIdentifierInput): string {\n  if (typeof agentId === \"bigint\") {\n    if (agentId < 0n) {\n      throw new Error(\"agentId must be non-negative\");\n    }\n    return agentId.toString(10);\n  }\n  if (typeof agentId === \"number\") {\n    if (\n      !Number.isFinite(agentId) ||\n      !Number.isInteger(agentId) ||\n      agentId < 0\n    ) {\n      throw new Error(\"agentId must be a non-negative integer\");\n    }\n    if (!Number.isSafeInteger(agentId)) {\n      throw new Error(\n        \"agentId number must be a safe integer; use string or bigint for larger values\"\n      );\n    }\n    return agentId.toString(10);\n  }\n  const normalized = `${agentId ?? \"\"}`.trim();\n  if (!normalized) {\n    throw new Error(\"agentId is required\");\n  }\n  return normalized;\n}\n\nfunction createRegistrationEntry(\n  params: RegistrationEntryParams\n): RegistrationEntry {\n  const entry: RegistrationEntry = {\n    agentId: normalizeAgentId(params.agentId),\n    agentAddress: toCaip10({\n      namespace: params.namespace,\n      chainId: params.chainId,\n      address: params.address,\n    }),\n  };\n  if (params.signature) {\n    entry.signature = params.signature;\n  }\n  return entry;\n}\n\nfunction createTrustConfig(\n  params: RegistrationEntryParams,\n  overrides?: TrustOverridesInput\n): TrustConfig {\n  return {\n    registrations: [createRegistrationEntry(params)],\n    ...overrides,\n  };\n}\n\nexport type IdentityRegistryClient = {\n  readonly address: Hex;\n  readonly chainId?: number;\n  get(agentId: bigint | number | string): Promise<IdentityRecord | null>;\n  register(input: RegisterAgentInput): Promise<RegisterAgentResult>;\n  toRegistrationEntry(\n    record: IdentityRecord,\n    signature?: string\n  ): RegistrationEntry;\n};\n\nexport type PublicClientLike = {\n  readContract(args: {\n    address: Hex;\n    abi: typeof IDENTITY_REGISTRY_ABI;\n    functionName: IdentityRegistryReadFunctionName;\n    args?: readonly unknown[];\n  }): Promise<any>;\n};\n\nexport type WalletClientLike = {\n  account?: { address?: Hex };\n  writeContract(args: {\n    address: Hex;\n    abi: typeof IDENTITY_REGISTRY_ABI;\n    functionName: IdentityRegistryWriteFunctionName;\n    args?: readonly unknown[];\n  }): Promise<Hex>;\n};\n\nexport type TransactionReceiptLike = {\n  logs?: Array<{\n    address: Hex;\n    topics: Hex[];\n    data: Hex;\n  }>;\n};\n\nexport type PublicClientWithReceipt = PublicClientLike & {\n  waitForTransactionReceipt?(args: {\n    hash: Hex;\n  }): Promise<TransactionReceiptLike>;\n  getTransactionReceipt?(args: { hash: Hex }): Promise<TransactionReceiptLike>;\n  getContractEvents?(args: {\n    address: Hex;\n    abi: typeof IDENTITY_REGISTRY_ABI;\n    eventName: string;\n    fromBlock?: bigint;\n    toBlock?: bigint;\n  }): Promise<any[]>;\n};\n\nexport type RegisterAgentInput = {\n  tokenURI: string;\n  metadata?: Array<{ key: string; value: Uint8Array }>;\n};\n\nexport type RegisterAgentResult = {\n  transactionHash: Hex;\n  agentAddress: Hex;\n  agentId?: bigint;\n};\n\nexport function createIdentityRegistryClient<\n  PublicClient extends PublicClientLike,\n  WalletClient extends WalletClientLike | undefined = undefined\n>(\n  options: IdentityRegistryClientOptions<PublicClient, WalletClient>\n): IdentityRegistryClient {\n  const {\n    address,\n    chainId,\n    publicClient,\n    walletClient,\n    namespace = \"eip155\",\n  } = options;\n\n  function ensureWalletClient(): WalletClientLike {\n    if (!walletClient) {\n      throw new Error(\n        \"identity registry client requires walletClient for writes\"\n      );\n    }\n    return walletClient;\n  }\n\n  return {\n    address,\n    chainId,\n\n    async get(agentId) {\n      const id = BigInt(agentId);\n\n      const exists = (await publicClient.readContract({\n        address,\n        abi: IDENTITY_REGISTRY_ABI,\n        functionName: \"agentExists\",\n        args: [id],\n      })) as boolean;\n\n      if (!exists) {\n        return null;\n      }\n\n      const [owner, uri] = await Promise.all([\n        publicClient.readContract({\n          address,\n          abi: IDENTITY_REGISTRY_ABI,\n          functionName: \"ownerOf\",\n          args: [id],\n        }) as Promise<string>,\n        publicClient.readContract({\n          address,\n          abi: IDENTITY_REGISTRY_ABI,\n          functionName: \"tokenURI\",\n          args: [id],\n        }) as Promise<string>,\n      ]);\n\n      return {\n        agentId: id,\n        owner: normalizeAddress(owner),\n        tokenURI: uri,\n      };\n    },\n\n    async register(input) {\n      const wallet = ensureWalletClient();\n\n      if (!input.tokenURI) {\n        throw new Error(\"tokenURI is required\");\n      }\n\n      if (!wallet.account?.address) {\n        throw new Error(\"wallet account address is required\");\n      }\n\n      const agentAddress = normalizeAddress(wallet.account.address);\n\n      const args = input.metadata\n        ? [input.tokenURI, input.metadata]\n        : [input.tokenURI];\n\n      const txHash = await wallet.writeContract({\n        address,\n        abi: IDENTITY_REGISTRY_ABI,\n        functionName: \"register\",\n        args,\n      });\n\n      // Parse transaction receipt to get agentId from Registered event\n      let agentId: bigint | undefined;\n      try {\n        const publicClientWithReceipt = publicClient as PublicClientWithReceipt;\n\n        let receipt: TransactionReceiptLike | undefined;\n        if (publicClientWithReceipt.waitForTransactionReceipt) {\n          receipt = await publicClientWithReceipt.waitForTransactionReceipt({\n            hash: txHash,\n          });\n        } else if (publicClientWithReceipt.getTransactionReceipt) {\n          receipt = await publicClientWithReceipt.getTransactionReceipt({\n            hash: txHash,\n          });\n        }\n\n        const REGISTERED_EVENT_SIGNATURE =\n          \"0xca52e62c367d81bb2e328eb795f7c7ba24afb478408a26c0e201d155c449bc4a\";\n\n        // topics[0] = event signature hash\n        // topics[1] = agentId (indexed uint256)\n        // topics[2] = owner (indexed address)\n        if (receipt?.logs) {\n          for (const log of receipt.logs) {\n            if (\n              log.address.toLowerCase() === address.toLowerCase() &&\n              log.topics[0] === REGISTERED_EVENT_SIGNATURE &&\n              log.topics.length >= 2\n            ) {\n              agentId = BigInt(log.topics[1]);\n              break;\n            }\n          }\n        }\n      } catch (error) {\n        agentId = undefined;\n      }\n\n      return {\n        transactionHash: txHash,\n        agentAddress,\n        agentId,\n      };\n    },\n\n    toRegistrationEntry(record, signature) {\n      if (chainId == null) {\n        throw new Error(\n          \"identity registry client needs chainId to build CAIP-10 registration entries\"\n        );\n      }\n      return createRegistrationEntry({\n        agentId: record.agentId,\n        address: record.owner,\n        chainId,\n        namespace,\n        signature,\n      });\n    },\n  };\n}\n\nexport type SignAgentDomainProofOptions = {\n  domain: string;\n  address: Hex;\n  chainId: number;\n  signer: MessageSignerLike;\n  nonce?: string;\n};\n\nexport type MessageSignerLike = WalletClientLike;\n\nexport async function signAgentDomainProof(\n  options: SignAgentDomainProofOptions\n): Promise<string> {\n  const { domain, address, chainId, nonce, signer } = options;\n  const normalizedDomain = normalizeDomain(domain);\n  if (!normalizedDomain) throw new Error(\"domain is required\");\n  const normalizedAddress = normalizeAddress(address);\n  if (!normalizedAddress || normalizedAddress === ZERO_ADDRESS) {\n    throw new Error(\"address must be a valid hex address\");\n  }\n\n  // Use Viem's proper signMessage action\n  const { signDomainProof } = await import(\"../utils/signatures\");\n\n  return signDomainProof(signer as any, {\n    domain: normalizedDomain,\n    address: normalizedAddress,\n    chainId,\n    nonce,\n  });\n}\n\nexport function buildTrustConfigFromIdentity(\n  record: IdentityRecord,\n  options?: {\n    signature?: string;\n    chainId: number | string;\n    namespace?: string;\n    trustOverrides?: TrustOverridesInput;\n  }\n): TrustConfig {\n  const chainRef = options?.chainId;\n  if (chainRef == null) {\n    throw new Error(\n      \"chainId is required to generate trust config registration entry\"\n    );\n  }\n\n  return createTrustConfig(\n    {\n      agentId: record.agentId,\n      address: record.owner,\n      chainId: chainRef,\n      namespace: options?.namespace,\n      signature: options?.signature,\n    },\n    options?.trustOverrides\n  );\n}\n\n// Helper functions moved to signatures.ts for better organization\n\nexport type BootstrapTrustMissingContext = {\n  client: IdentityRegistryClient;\n  normalizedDomain: string;\n};\n\nexport type BootstrapTrustOptions = {\n  domain: string;\n  chainId: number;\n  registryAddress: Hex;\n  publicClient: PublicClientLike;\n  walletClient?: WalletClientLike;\n  namespace?: string;\n  signer?: MessageSignerLike;\n  signatureNonce?: string;\n  registerIfMissing?: boolean;\n  skipRegister?: boolean;\n  trustOverrides?: TrustOverridesInput;\n  onMissing?: (\n    context: BootstrapTrustMissingContext\n  ) =>\n    | Promise<IdentityRecord | null | undefined>\n    | IdentityRecord\n    | null\n    | undefined;\n};\n\nexport type BootstrapTrustResult = {\n  trust?: TrustConfig;\n  record?: IdentityRecord | null;\n  transactionHash?: Hex;\n  signature?: string;\n  didRegister?: boolean;\n};\n\n/**\n * Constructs the metadata URI for an agent's domain\n * Points to /.well-known/agent-metadata.json\n */\nexport function buildMetadataURI(domain: string): string {\n  const normalized = normalizeDomain(domain);\n  if (!normalized) {\n    throw new Error(\"domain is required\");\n  }\n\n  // If domain already has protocol, use it; otherwise assume https\n  const origin = normalized.startsWith(\"http\")\n    ? normalized\n    : `https://${normalized}`;\n\n  return `${origin}/.well-known/agent-metadata.json`;\n}\n\nexport async function bootstrapTrust(\n  options: BootstrapTrustOptions\n): Promise<BootstrapTrustResult> {\n  const normalizedDomain = normalizeDomain(options.domain);\n  if (!normalizedDomain) {\n    throw new Error(\"domain is required to bootstrap trust state\");\n  }\n\n  const shouldRegister = Boolean(\n    options.registerIfMissing && !options.skipRegister\n  );\n\n  const client = createIdentityRegistryClient({\n    address: options.registryAddress,\n    chainId: options.chainId,\n    publicClient: options.publicClient,\n    walletClient: options.walletClient,\n    namespace: options.namespace,\n  });\n\n  let record: IdentityRecord | null = null;\n  let transactionHash: Hex | undefined;\n  let didRegister = false;\n\n  if (options.onMissing) {\n    const handled = await options.onMissing({\n      client,\n      normalizedDomain,\n    });\n    if (handled) {\n      record = handled;\n    }\n  }\n\n  if (!record && shouldRegister) {\n    const tokenURI = buildMetadataURI(normalizedDomain);\n\n    const registration = await client.register({ tokenURI });\n    transactionHash = registration.transactionHash;\n    didRegister = true;\n\n    if (registration.agentId != null) {\n      record = {\n        agentId: registration.agentId,\n        owner: registration.agentAddress,\n        tokenURI,\n      } satisfies IdentityRecord;\n    }\n  }\n\n  if (!record) {\n    return {\n      trust: undefined,\n      record: null,\n      transactionHash,\n      didRegister,\n    };\n  }\n\n  let signature: string | undefined;\n  if (options.signer) {\n    try {\n      signature = await signAgentDomainProof({\n        domain: normalizedDomain,\n        address: record.owner,\n        chainId: options.chainId,\n        signer: options.signer,\n        nonce: options.signatureNonce,\n      });\n      // Debug: Confirm signature was generated\n      if (signature) {\n        defaultLogger.info?.(\n          `[agent-kit-identity] Generated domain proof signature: ${signature.slice(\n            0,\n            10\n          )}...`\n        );\n      }\n    } catch (error) {\n      defaultLogger.warn?.(\n        \"[agent-kit-identity] Failed to generate domain proof signature\",\n        error\n      );\n    }\n  } else {\n    defaultLogger.info?.(\n      \"[agent-kit-identity] No signer provided - skipping domain proof signature\"\n    );\n  }\n\n  const trust = buildTrustConfigFromIdentity(record, {\n    chainId: options.chainId,\n    namespace: options.namespace,\n    signature,\n    trustOverrides: options.trustOverrides,\n  });\n\n  return {\n    trust,\n    record,\n    transactionHash,\n    signature,\n    didRegister,\n  } satisfies BootstrapTrustResult;\n}\n\nconst defaultLogger = {\n  info:\n    typeof console !== \"undefined\" && typeof console.info === \"function\"\n      ? console.info.bind(console)\n      : () => {},\n  warn:\n    typeof console !== \"undefined\" && typeof console.warn === \"function\"\n      ? console.warn.bind(console)\n      : () => {},\n};\n\nfunction parsePositiveInteger(value: string | undefined): number | undefined {\n  if (!value) return undefined;\n  const parsed = Number(value);\n  if (!Number.isFinite(parsed) || parsed <= 0) return undefined;\n  return Math.trunc(parsed);\n}\n\nfunction resolveTrustOverrides(\n  domain: string | undefined,\n  overrides?: TrustOverridesInput,\n  fallback?: TrustOverridesInput\n): TrustOverridesInput | undefined {\n  const result: TrustOverridesInput = {};\n\n  if (domain) {\n    result.trustModels = [...DEFAULT_TRUST_MODELS]; // Copy to avoid readonly issues\n    const origin = domain.startsWith(\"http\") ? domain : `https://${domain}`;\n    result.validationRequestsUri = `${origin}/validation/requests.json`;\n    result.validationResponsesUri = `${origin}/validation/responses.json`;\n    result.feedbackDataUri = `${origin}/feedback.json`;\n  }\n\n  if (fallback) {\n    if (fallback.trustModels !== undefined) {\n      result.trustModels = fallback.trustModels;\n    }\n    if (fallback.validationRequestsUri !== undefined) {\n      result.validationRequestsUri = fallback.validationRequestsUri;\n    }\n    if (fallback.validationResponsesUri !== undefined) {\n      result.validationResponsesUri = fallback.validationResponsesUri;\n    }\n    if (fallback.feedbackDataUri !== undefined) {\n      result.feedbackDataUri = fallback.feedbackDataUri;\n    }\n  }\n\n  if (overrides) {\n    if (overrides.trustModels !== undefined) {\n      result.trustModels = overrides.trustModels;\n    }\n    if (overrides.validationRequestsUri !== undefined) {\n      result.validationRequestsUri = overrides.validationRequestsUri;\n    }\n    if (overrides.validationResponsesUri !== undefined) {\n      result.validationResponsesUri = overrides.validationResponsesUri;\n    }\n    if (overrides.feedbackDataUri !== undefined) {\n      result.feedbackDataUri = overrides.feedbackDataUri;\n    }\n  }\n\n  return Object.keys(result).length > 0 ? result : undefined;\n}\n\ntype InferLogger = {\n  info?(message: string): void;\n  warn?(message: string, error?: unknown): void;\n};\n\nexport type BootstrapIdentityClients = {\n  publicClient: PublicClientLike;\n  walletClient?: WalletClientLike;\n  signer?: MessageSignerLike;\n};\n\nexport type BootstrapIdentityClientFactory = (params: {\n  chainId: number;\n  rpcUrl: string;\n  env: Record<string, string | undefined>;\n}) =>\n  | BootstrapIdentityClients\n  | null\n  | undefined\n  | Promise<BootstrapIdentityClients | null | undefined>;\n\nexport type BootstrapIdentityOptions = {\n  domain?: string;\n  chainId?: number;\n  registryAddress?: Hex;\n  namespace?: string;\n  publicClient?: PublicClientLike;\n  walletClient?: WalletClientLike;\n  signer?: MessageSignerLike;\n  rpcUrl?: string;\n  makeClients?: BootstrapIdentityClientFactory;\n  registerIfMissing?: boolean;\n  skipRegister?: boolean;\n  signatureNonce?: string;\n  trustOverrides?: TrustOverridesInput;\n  env?: Record<string, string | undefined>;\n  logger?: InferLogger;\n};\n\nexport type BootstrapIdentityResult = BootstrapTrustResult & {\n  synthetic?: boolean;\n};\n\nexport async function bootstrapIdentity(\n  options: BootstrapIdentityOptions = {}\n): Promise<BootstrapIdentityResult> {\n  const env =\n    options.env ??\n    (typeof process !== \"undefined\" && typeof process.env === \"object\"\n      ? (process.env as Record<string, string | undefined>)\n      : {});\n\n  const logger = {\n    info: options.logger?.info ?? defaultLogger.info,\n    warn: options.logger?.warn ?? defaultLogger.warn,\n  } satisfies InferLogger;\n\n  const resolvedChainId =\n    options.chainId ?? parsePositiveInteger(env.CHAIN_ID) ?? DEFAULT_CHAIN_ID;\n\n  const domain = options.domain ?? env.AGENT_DOMAIN;\n  const namespace = options.namespace ?? DEFAULT_NAMESPACE;\n  const registryAddress =\n    options.registryAddress ??\n    (env.IDENTITY_REGISTRY_ADDRESS as Hex | undefined);\n  const rpcUrl = options.rpcUrl ?? env.RPC_URL;\n\n  let publicClient = options.publicClient;\n  let walletClient = options.walletClient;\n  let signer = options.signer;\n\n  if (!publicClient && options.makeClients && rpcUrl) {\n    const produced = await options.makeClients({\n      chainId: resolvedChainId,\n      rpcUrl,\n      env,\n    });\n    if (produced?.publicClient) {\n      publicClient = produced.publicClient;\n      walletClient = walletClient ?? produced.walletClient;\n      signer = signer ?? produced.signer ?? (produced.walletClient as any);\n    }\n  }\n\n  if (!signer && walletClient) {\n    signer = walletClient as any;\n  }\n\n  const resolvedOverrides = resolveTrustOverrides(\n    domain,\n    options.trustOverrides,\n    undefined\n  );\n\n  if (domain && registryAddress && publicClient) {\n    try {\n      const result = await bootstrapTrust({\n        domain,\n        chainId: resolvedChainId,\n        registryAddress,\n        namespace,\n        publicClient,\n        walletClient,\n        signer,\n        signatureNonce: options.signatureNonce ?? env.IDENTITY_SIGNATURE_NONCE,\n        registerIfMissing:\n          options.registerIfMissing ?? env.REGISTER_IDENTITY === \"true\",\n        skipRegister: options.skipRegister,\n        trustOverrides: resolvedOverrides,\n      });\n\n      if (result.trust || result.didRegister || result.transactionHash) {\n        return result;\n      }\n\n      logger.warn(\n        \"[agent-kit-identity] identity not found in registry and registration not enabled\"\n      );\n    } catch (error) {\n      logger.warn(\n        \"[agent-kit-identity] failed to bootstrap ERC-8004 identity\",\n        error\n      );\n    }\n  }\n\n  logger.info(\"[agent-kit-identity] agent will run without ERC-8004 identity\");\n\n  return {};\n}\n\nexport type MakeViemClientsFromEnvOptions = {\n  env?: Record<string, string | undefined>;\n  rpcUrl?: string;\n  privateKey?: `0x${string}` | string;\n};\n\nasync function importViemModules(): Promise<{\n  createPublicClient: (...args: any[]) => any;\n  createWalletClient: (...args: any[]) => any;\n  http: (url: string) => any;\n  privateKeyToAccount: (key: `0x${string}`) => any;\n  baseSepolia: { id: number } & Record<string, unknown>;\n} | null> {\n  try {\n    const viem = await import(\"viem\");\n    const accounts = await import(\"viem/accounts\");\n    const chains = await import(\"viem/chains\").catch(() => ({}));\n    const baseSepoliaChain =\n      (chains as any).baseSepolia ?? ({ id: DEFAULT_CHAIN_ID } as const);\n    return {\n      createPublicClient: (viem as any).createPublicClient,\n      createWalletClient: (viem as any).createWalletClient,\n      http: (viem as any).http,\n      privateKeyToAccount: (accounts as any).privateKeyToAccount,\n      baseSepolia: baseSepoliaChain,\n    };\n  } catch (error) {\n    defaultLogger.warn(\n      \"[agent-kit] viem helpers unavailable; install viem to use makeViemClientsFromEnv\",\n      error\n    );\n    return null;\n  }\n}\n\nfunction resolveEnvObject(\n  env?: Record<string, string | undefined>\n): Record<string, string | undefined> {\n  if (env) return env;\n  if (typeof process !== \"undefined\" && typeof process.env === \"object\") {\n    return process.env as Record<string, string | undefined>;\n  }\n  return {};\n}\n\nexport async function makeViemClientsFromEnv(\n  options: MakeViemClientsFromEnvOptions = {}\n): Promise<BootstrapIdentityClientFactory | undefined> {\n  const env = resolveEnvObject(options.env);\n  const modules = await importViemModules();\n  if (!modules) return undefined;\n\n  return ({ chainId, rpcUrl, env: runtimeEnv }) => {\n    const effectiveRpcUrl = options.rpcUrl ?? rpcUrl ?? env.RPC_URL;\n    if (!effectiveRpcUrl) {\n      defaultLogger.warn(\n        \"[agent-kit] RPC_URL missing for viem client factory; skipping\"\n      );\n      return null;\n    }\n\n    const transport = modules.http(effectiveRpcUrl);\n    const chain = { ...modules.baseSepolia, id: chainId };\n    const publicClient = modules.createPublicClient({ chain, transport });\n\n    const mergedEnv = {\n      ...env,\n      ...runtimeEnv,\n    };\n\n    // Normalize private key - add 0x prefix if missing\n    let privateKey: `0x${string}` | undefined;\n    const rawKey = options.privateKey ?? mergedEnv.PRIVATE_KEY;\n    if (rawKey) {\n      const normalized = rawKey.trim();\n      privateKey = normalized.startsWith(\"0x\")\n        ? (normalized as `0x${string}`)\n        : (`0x${normalized}` as `0x${string}`);\n    }\n\n    let walletClient: any = undefined;\n    if (privateKey) {\n      try {\n        const account = modules.privateKeyToAccount(privateKey);\n        walletClient = modules.createWalletClient({\n          chain,\n          account,\n          transport,\n        });\n      } catch (error) {\n        defaultLogger.warn(\n          \"[agent-kit] failed to configure viem wallet client from PRIVATE_KEY\",\n          error\n        );\n      }\n    }\n\n    return {\n      publicClient,\n      walletClient,\n      signer: walletClient,\n    } satisfies BootstrapIdentityClients;\n  };\n}\n","/**\n * ERC-8004 Reputation Registry Client\n * Handles peer feedback system for agent reputation\n */\n\nimport type { Hex } from \"../utils\";\nimport { normalizeAddress } from \"../utils\";\nimport type { PublicClientLike, WalletClientLike } from \"./identity\";\nimport { signFeedbackAuth, type SignerWalletClient } from \"../utils\";\nimport { REPUTATION_REGISTRY_ABI } from \"../abi/types\";\n\nexport type ReputationRegistryClientOptions<\n  PublicClient extends PublicClientLike,\n  WalletClient extends WalletClientLike | undefined = undefined\n> = {\n  address: Hex;\n  chainId: number;\n  publicClient: PublicClient;\n  walletClient?: WalletClient;\n  identityRegistryAddress: Hex;\n};\n\n/**\n * Feedback entry returned from the registry\n */\nexport type FeedbackEntry = {\n  agentId: bigint;\n  clientAddress: Hex;\n  feedbackIndex: bigint;\n  score: number; // 0-100\n  tag1: Hex;\n  tag2: Hex;\n  fileUri: string;\n  fileHash: Hex;\n  isRevoked: boolean;\n  responseCount?: bigint;\n};\n\n/**\n * Parameters for giving feedback\n */\nexport type GiveFeedbackInput = {\n  toAgentId: bigint;\n  score: number; // 0-100\n  tag1?: string | Hex;\n  tag2?: string | Hex;\n  fileUri?: string;\n  fileHash?: Hex;\n  feedbackAuth?: Hex; // Pre-signed authorization, or we'll sign it\n  expiry?: number; // Unix timestamp for signature expiry\n  indexLimit?: bigint; // Max feedback index this signature is valid for\n};\n\n/**\n * Parameters for revoking feedback\n */\nexport type RevokeFeedbackInput = {\n  agentId: bigint;\n  feedbackIndex: bigint;\n};\n\n/**\n * Parameters for appending a response to feedback\n */\nexport type AppendResponseInput = {\n  agentId: bigint;\n  clientAddress: Hex;\n  feedbackIndex: bigint;\n  responseUri: string;\n  responseHash: Hex;\n};\n\n/**\n * Summary statistics for an agent's reputation\n */\nexport type ReputationSummary = {\n  count: bigint;\n  averageScore: number; // 0-100\n};\n\nexport type ReputationRegistryClient = {\n  readonly address: Hex;\n  readonly chainId: number;\n\n  // Core write operations\n  giveFeedback(input: GiveFeedbackInput): Promise<Hex>;\n  revokeFeedback(input: RevokeFeedbackInput): Promise<Hex>;\n  appendResponse(input: AppendResponseInput): Promise<Hex>;\n\n  // Read operations\n  getFeedback(\n    agentId: bigint,\n    clientAddress: Hex,\n    feedbackIndex: bigint\n  ): Promise<FeedbackEntry | null>;\n\n  getAllFeedback(\n    agentId: bigint,\n    options?: {\n      clientAddresses?: Hex[];\n      tag1?: Hex;\n      tag2?: Hex;\n      includeRevoked?: boolean;\n    }\n  ): Promise<FeedbackEntry[]>;\n\n  getSummary(\n    agentId: bigint,\n    options?: {\n      clientAddresses?: Hex[];\n      tag1?: Hex;\n      tag2?: Hex;\n    }\n  ): Promise<ReputationSummary>;\n\n  getClients(agentId: bigint): Promise<Hex[]>;\n\n  getLastIndex(agentId: bigint, clientAddress: Hex): Promise<bigint>;\n\n  getResponseCount(\n    agentId: bigint,\n    clientAddress: Hex,\n    feedbackIndex: bigint,\n    responders: Hex[]\n  ): Promise<bigint>;\n};\n\n/**\n * Convert string to bytes32 for tags\n */\nfunction stringToBytes32(str: string): Hex {\n  if (str.startsWith(\"0x\")) {\n    // Validate hex string is proper bytes32 format\n    if (!/^0x[0-9a-fA-F]{64}$/.test(str)) {\n      throw new Error(`Invalid bytes32 hex string: ${str}`);\n    }\n    return str as Hex;\n  }\n  // Convert string to bytes32\n  const encoder = new TextEncoder();\n  const bytes = encoder.encode(str);\n  if (bytes.length > 32) {\n    throw new Error(`Tag \"${str}\" is too long (max 32 bytes)`);\n  }\n  // Pad to 32 bytes\n  const padded = new Uint8Array(32);\n  padded.set(bytes);\n  return `0x${Array.from(padded)\n    .map((b) => b.toString(16).padStart(2, \"0\"))\n    .join(\"\")}` as Hex;\n}\n\n/**\n * Create a Reputation Registry client\n */\nexport function createReputationRegistryClient<\n  PublicClient extends PublicClientLike,\n  WalletClient extends WalletClientLike | undefined = undefined\n>(\n  options: ReputationRegistryClientOptions<PublicClient, WalletClient>\n): ReputationRegistryClient {\n  const {\n    address,\n    chainId,\n    publicClient,\n    walletClient,\n    identityRegistryAddress,\n  } = options;\n\n  function ensureWalletClient(): WalletClientLike {\n    if (!walletClient) {\n      throw new Error(\n        \"Reputation registry client requires walletClient for write operations\"\n      );\n    }\n    return walletClient;\n  }\n\n  return {\n    address,\n    chainId,\n\n    async giveFeedback(input) {\n      const wallet = ensureWalletClient();\n      const clientAddress = normalizeAddress(wallet.account?.address);\n\n      if (!clientAddress) {\n        throw new Error(\"Wallet account address is required\");\n      }\n\n      // Normalize tags\n      const tag1 = input.tag1\n        ? typeof input.tag1 === \"string\"\n          ? stringToBytes32(input.tag1)\n          : input.tag1\n        : (\"0x0000000000000000000000000000000000000000000000000000000000000000\" as Hex);\n\n      const tag2 = input.tag2\n        ? typeof input.tag2 === \"string\"\n          ? stringToBytes32(input.tag2)\n          : input.tag2\n        : (\"0x0000000000000000000000000000000000000000000000000000000000000000\" as Hex);\n\n      // Generate feedback authorization signature if not provided\n      let feedbackAuth = input.feedbackAuth;\n      if (!feedbackAuth) {\n        const expiry = input.expiry ?? Math.floor(Date.now() / 1000) + 3600; // 1 hour default\n        const indexLimit = input.indexLimit ?? 1000n;\n\n        feedbackAuth = await signFeedbackAuth(wallet as SignerWalletClient, {\n          fromAddress: clientAddress,\n          toAgentId: input.toAgentId,\n          score: input.score,\n          chainId,\n          expiry,\n          indexLimit,\n        });\n      }\n\n      // Call contract\n      const txHash = await wallet.writeContract({\n        address,\n        abi: REPUTATION_REGISTRY_ABI,\n        functionName: \"giveFeedback\",\n        args: [\n          input.toAgentId,\n          input.score,\n          tag1,\n          tag2,\n          input.fileUri ?? \"\",\n          input.fileHash ??\n            (\"0x0000000000000000000000000000000000000000000000000000000000000000\" as Hex),\n          feedbackAuth,\n        ],\n      });\n\n      return txHash;\n    },\n\n    async revokeFeedback(input) {\n      const wallet = ensureWalletClient();\n\n      const txHash = await wallet.writeContract({\n        address,\n        abi: REPUTATION_REGISTRY_ABI,\n        functionName: \"revokeFeedback\",\n        args: [input.agentId, input.feedbackIndex],\n      });\n\n      return txHash;\n    },\n\n    async appendResponse(input) {\n      const wallet = ensureWalletClient();\n\n      const txHash = await wallet.writeContract({\n        address,\n        abi: REPUTATION_REGISTRY_ABI,\n        functionName: \"appendResponse\",\n        args: [\n          input.agentId,\n          input.clientAddress,\n          input.feedbackIndex,\n          input.responseUri,\n          input.responseHash,\n        ],\n      });\n\n      return txHash;\n    },\n\n    async getFeedback(agentId, clientAddress, feedbackIndex) {\n      try {\n        const result = (await publicClient.readContract({\n          address,\n          abi: REPUTATION_REGISTRY_ABI,\n          functionName: \"readFeedback\",\n          args: [agentId, clientAddress, feedbackIndex],\n        })) as [number, Hex, Hex, boolean];\n\n        const [score, tag1, tag2, isRevoked] = result;\n\n        return {\n          agentId,\n          clientAddress,\n          feedbackIndex,\n          score,\n          tag1,\n          tag2,\n          fileUri: \"\", // Not returned by readFeedback\n          fileHash:\n            \"0x0000000000000000000000000000000000000000000000000000000000000000\" as Hex,\n          isRevoked,\n        };\n      } catch (error) {\n        return null;\n      }\n    },\n\n    async getAllFeedback(agentId, options = {}) {\n      const clientAddresses = options.clientAddresses ?? [];\n      const tag1 =\n        options.tag1 ??\n        (\"0x0000000000000000000000000000000000000000000000000000000000000000\" as Hex);\n      const tag2 =\n        options.tag2 ??\n        (\"0x0000000000000000000000000000000000000000000000000000000000000000\" as Hex);\n      const includeRevoked = options.includeRevoked ?? false;\n\n      const result = (await publicClient.readContract({\n        address,\n        abi: REPUTATION_REGISTRY_ABI,\n        functionName: \"readAllFeedback\",\n        args: [agentId, clientAddresses, tag1, tag2, includeRevoked],\n      })) as [Hex[], number[], Hex[], Hex[], boolean[]];\n\n      const [clients, scores, tag1s, tag2s, revokedStatuses] = result;\n\n      return clients.map((client, i) => ({\n        agentId,\n        clientAddress: client,\n        feedbackIndex: BigInt(i),\n        score: scores[i],\n        tag1: tag1s[i],\n        tag2: tag2s[i],\n        fileUri: \"\",\n        fileHash:\n          \"0x0000000000000000000000000000000000000000000000000000000000000000\" as Hex,\n        isRevoked: revokedStatuses[i],\n      }));\n    },\n\n    async getSummary(agentId, options = {}) {\n      const clientAddresses = options.clientAddresses ?? [];\n      const tag1 =\n        options.tag1 ??\n        (\"0x0000000000000000000000000000000000000000000000000000000000000000\" as Hex);\n      const tag2 =\n        options.tag2 ??\n        (\"0x0000000000000000000000000000000000000000000000000000000000000000\" as Hex);\n\n      const result = (await publicClient.readContract({\n        address,\n        abi: REPUTATION_REGISTRY_ABI,\n        functionName: \"getSummary\",\n        args: [agentId, clientAddresses, tag1, tag2],\n      })) as [bigint, number];\n\n      const [count, averageScore] = result;\n\n      return {\n        count,\n        averageScore,\n      };\n    },\n\n    async getClients(agentId) {\n      const result = (await publicClient.readContract({\n        address,\n        abi: REPUTATION_REGISTRY_ABI,\n        functionName: \"getClients\",\n        args: [agentId],\n      })) as Hex[];\n\n      return result;\n    },\n\n    async getLastIndex(agentId, clientAddress) {\n      const result = (await publicClient.readContract({\n        address,\n        abi: REPUTATION_REGISTRY_ABI,\n        functionName: \"getLastIndex\",\n        args: [agentId, clientAddress],\n      })) as bigint;\n\n      return result;\n    },\n\n    async getResponseCount(agentId, clientAddress, feedbackIndex, responders) {\n      const result = (await publicClient.readContract({\n        address,\n        abi: REPUTATION_REGISTRY_ABI,\n        functionName: \"getResponseCount\",\n        args: [agentId, clientAddress, feedbackIndex, responders],\n      })) as bigint;\n\n      return result;\n    },\n  };\n}\n","/**\n * ERC-8004 Validation Registry Client\n * Handles validation requests and responses for agent work verification\n */\n\nimport type { Hex } from \"../utils\";\nimport { normalizeAddress } from \"../utils\";\nimport type { PublicClientLike, WalletClientLike } from \"./identity\";\nimport { VALIDATION_REGISTRY_ABI } from \"../abi/types\";\n\n/**\n * Default tag value for validation operations (zero bytes32)\n */\nconst DEFAULT_TAG: Hex =\n  \"0x0000000000000000000000000000000000000000000000000000000000000000\" as Hex;\n\nexport type ValidationRegistryClientOptions<\n  PublicClient extends PublicClientLike,\n  WalletClient extends WalletClientLike | undefined = undefined\n> = {\n  address: Hex;\n  chainId: number;\n  publicClient: PublicClient;\n  walletClient?: WalletClient;\n  identityRegistryAddress: Hex;\n};\n\n/**\n * Validation request entry\n */\nexport type ValidationRequest = {\n  validatorAddress: Hex;\n  agentId: bigint;\n  requestUri: string;\n  requestHash: Hex;\n  timestamp: bigint;\n};\n\n/**\n * Validation status/response\n */\nexport type ValidationStatus = {\n  validatorAddress: Hex;\n  agentId: bigint;\n  response: number; // Validation result code\n  tag: Hex;\n  lastUpdate: bigint;\n};\n\n/**\n * Parameters for creating a validation request\n */\nexport type CreateValidationRequestInput = {\n  validatorAddress: Hex;\n  agentId: bigint;\n  requestUri: string;\n  requestHash: Hex;\n};\n\n/**\n * Parameters for submitting a validation response\n */\nexport type SubmitValidationResponseInput = {\n  requestHash: Hex;\n  response: number; // Result code\n  responseUri: string;\n  responseHash: Hex;\n  tag?: Hex;\n};\n\n/**\n * Validation summary statistics\n */\nexport type ValidationSummary = {\n  count: bigint;\n  avgResponse: number;\n};\n\nexport type ValidationRegistryClient = {\n  readonly address: Hex;\n  readonly chainId: number;\n\n  // Core write operations\n  createRequest(input: CreateValidationRequestInput): Promise<Hex>;\n  submitResponse(input: SubmitValidationResponseInput): Promise<Hex>;\n\n  // Read operations\n  getRequest(requestHash: Hex): Promise<ValidationRequest | null>;\n  getValidationStatus(requestHash: Hex): Promise<ValidationStatus | null>;\n  requestExists(requestHash: Hex): Promise<boolean>;\n\n  getAgentValidations(agentId: bigint): Promise<Hex[]>;\n  getValidatorRequests(validatorAddress: Hex): Promise<Hex[]>;\n\n  getSummary(\n    agentId: bigint,\n    options?: {\n      validatorAddresses?: Hex[];\n      tag?: Hex;\n    }\n  ): Promise<ValidationSummary>;\n};\n\n/**\n * Create a Validation Registry client\n */\nexport function createValidationRegistryClient<\n  PublicClient extends PublicClientLike,\n  WalletClient extends WalletClientLike | undefined = undefined\n>(\n  options: ValidationRegistryClientOptions<PublicClient, WalletClient>\n): ValidationRegistryClient {\n  const {\n    address,\n    chainId,\n    publicClient,\n    walletClient,\n    identityRegistryAddress,\n  } = options;\n\n  function ensureWalletClient(): WalletClientLike {\n    if (!walletClient) {\n      throw new Error(\n        \"Validation registry client requires walletClient for write operations\"\n      );\n    }\n    return walletClient;\n  }\n\n  return {\n    address,\n    chainId,\n\n    async createRequest(input) {\n      const wallet = ensureWalletClient();\n\n      const txHash = await wallet.writeContract({\n        address,\n        abi: VALIDATION_REGISTRY_ABI,\n        functionName: \"validationRequest\",\n        args: [\n          input.validatorAddress,\n          input.agentId,\n          input.requestUri,\n          input.requestHash,\n        ],\n      });\n\n      return txHash;\n    },\n\n    async submitResponse(input) {\n      const wallet = ensureWalletClient();\n\n      const tag = input.tag ?? DEFAULT_TAG;\n\n      const txHash = await wallet.writeContract({\n        address,\n        abi: VALIDATION_REGISTRY_ABI,\n        functionName: \"validationResponse\",\n        args: [\n          input.requestHash,\n          input.response,\n          input.responseUri,\n          input.responseHash,\n          tag,\n        ],\n      });\n\n      return txHash;\n    },\n\n    async getRequest(requestHash) {\n      try {\n        const result = (await publicClient.readContract({\n          address,\n          abi: VALIDATION_REGISTRY_ABI,\n          functionName: \"getRequest\",\n          args: [requestHash],\n        })) as [Hex, bigint, string, bigint];\n\n        const [validatorAddress, agentId, requestUri, timestamp] = result;\n\n        return {\n          validatorAddress,\n          agentId,\n          requestUri,\n          requestHash,\n          timestamp,\n        };\n      } catch (error) {\n        return null;\n      }\n    },\n\n    async getValidationStatus(requestHash) {\n      try {\n        const result = (await publicClient.readContract({\n          address,\n          abi: VALIDATION_REGISTRY_ABI,\n          functionName: \"getValidationStatus\",\n          args: [requestHash],\n        })) as [Hex, bigint, number, Hex, bigint];\n\n        const [validatorAddress, agentId, response, tag, lastUpdate] = result;\n\n        return {\n          validatorAddress,\n          agentId,\n          response,\n          tag,\n          lastUpdate,\n        };\n      } catch (error) {\n        return null;\n      }\n    },\n\n    async requestExists(requestHash) {\n      const exists = (await publicClient.readContract({\n        address,\n        abi: VALIDATION_REGISTRY_ABI,\n        functionName: \"requestExists\",\n        args: [requestHash],\n      })) as boolean;\n\n      return exists;\n    },\n\n    async getAgentValidations(agentId) {\n      const requestHashes = (await publicClient.readContract({\n        address,\n        abi: VALIDATION_REGISTRY_ABI,\n        functionName: \"getAgentValidations\",\n        args: [agentId],\n      })) as Hex[];\n\n      return requestHashes;\n    },\n\n    async getValidatorRequests(validatorAddress) {\n      const requestHashes = (await publicClient.readContract({\n        address,\n        abi: VALIDATION_REGISTRY_ABI,\n        functionName: \"getValidatorRequests\",\n        args: [validatorAddress],\n      })) as Hex[];\n\n      return requestHashes;\n    },\n\n    async getSummary(agentId, options = {}) {\n      const validatorAddresses = options.validatorAddresses ?? [];\n      const tag = options.tag ?? DEFAULT_TAG;\n\n      const result = (await publicClient.readContract({\n        address,\n        abi: VALIDATION_REGISTRY_ABI,\n        functionName: \"getSummary\",\n        args: [agentId, validatorAddresses, tag],\n      })) as [bigint, number];\n\n      const [count, avgResponse] = result;\n\n      return {\n        count,\n        avgResponse,\n      };\n    },\n  };\n}\n","/**\n * Simplified initialization helpers for agent identity.\n * These functions provide a streamlined API for common use cases.\n */\n\nimport {\n  bootstrapIdentity,\n  makeViemClientsFromEnv,\n  type BootstrapIdentityOptions,\n  type BootstrapIdentityResult,\n  type BootstrapIdentityClientFactory,\n  createIdentityRegistryClient,\n  type IdentityRegistryClient,\n  type PublicClientLike,\n  type WalletClientLike,\n} from \"./registries/identity\";\nimport {\n  createReputationRegistryClient,\n  type ReputationRegistryClient,\n} from \"./registries/reputation\";\nimport {\n  createValidationRegistryClient,\n  type ValidationRegistryClient,\n} from \"./registries/validation\";\nimport type { TrustConfig } from \"./types\";\nimport type { Hex } from \"./utils\";\nimport { getRegistryAddresses } from \"./config\";\n\nexport type { BootstrapIdentityResult, TrustConfig };\n\n/**\n * Options for creating agent identity with automatic registration.\n */\nexport type CreateAgentIdentityOptions = {\n  /**\n   * Agent domain (e.g., \"agent.example.com\").\n   * Falls back to AGENT_DOMAIN env var if not provided.\n   */\n  domain?: string;\n\n  /**\n   * Whether to automatically register if not found in registry.\n   * Defaults to true.\n   */\n  autoRegister?: boolean;\n\n  /**\n   * Chain ID for the ERC-8004 registry.\n   * Falls back to CHAIN_ID env var or defaults to Base Sepolia (84532).\n   */\n  chainId?: number;\n\n  /**\n   * Registry contract address.\n   * Falls back to IDENTITY_REGISTRY_ADDRESS env var.\n   */\n  registryAddress?: `0x${string}`;\n\n  /**\n   * RPC URL for blockchain connection.\n   * Falls back to RPC_URL env var.\n   */\n  rpcUrl?: string;\n\n  /**\n   * Private key for wallet operations.\n   * Falls back to PRIVATE_KEY env var.\n   * Required for registration operations.\n   */\n  privateKey?: `0x${string}` | string;\n\n  /**\n   * Trust models to advertise (e.g., [\"feedback\", \"inference-validation\"]).\n   * Defaults to [\"feedback\", \"inference-validation\"].\n   */\n  trustModels?: string[];\n\n  /**\n   * Optional custom trust config overrides.\n   */\n  trustOverrides?: {\n    validationRequestsUri?: string;\n    validationResponsesUri?: string;\n    feedbackDataUri?: string;\n  };\n\n  /**\n   * Custom environment variables object.\n   * Defaults to process.env.\n   */\n  env?: Record<string, string | undefined>;\n\n  /**\n   * Optional client factory (useful for testing).\n   * If provided, this will be used instead of makeViemClientsFromEnv.\n   */\n  makeClients?: BootstrapIdentityClientFactory;\n\n  /**\n   * Logger for diagnostic messages.\n   */\n  logger?: {\n    info?(message: string): void;\n    warn?(message: string, error?: unknown): void;\n  };\n};\n\n/**\n * Registry clients for interacting with ERC-8004 contracts\n */\nexport type RegistryClients = {\n  identity: IdentityRegistryClient;\n  reputation: ReputationRegistryClient;\n  validation: ValidationRegistryClient;\n};\n\n/**\n * Result of agent identity creation.\n */\nexport type AgentIdentity = BootstrapIdentityResult & {\n  /**\n   * Human-readable status message.\n   */\n  status: string;\n\n  /**\n   * The resolved domain.\n   */\n  domain?: string;\n\n  /**\n   * Whether this is the first registration.\n   */\n  isNewRegistration?: boolean;\n\n  /**\n   * Registry clients for all three ERC-8004 registries.\n   * Available when registry address and clients are configured.\n   */\n  clients?: RegistryClients;\n};\n\n/**\n * Create agent identity with automatic registration and sensible defaults.\n *\n * This is the recommended way to set up ERC-8004 identity for your agent.\n * It handles:\n * - Viem client creation from environment variables\n * - Automatic registry lookup\n * - Optional auto-registration when not found\n * - Domain proof signature generation\n * - Creation of all three registry clients (identity, reputation, validation)\n *\n * @example\n * ```ts\n * import { createAgentIdentity } from \"@lucid-dreams/agent-kit-identity\";\n *\n * // Minimal usage - uses env vars for everything\n * const identity = await createAgentIdentity({ autoRegister: true });\n *\n * if (identity.trust) {\n *   console.log(\"Agent registered with ID:\", identity.record?.agentId);\n * }\n *\n * // Use registry clients\n * if (identity.clients) {\n *   // Give feedback to another agent\n *   await identity.clients.reputation.giveFeedback({\n *     toAgentId: 42n,\n *     score: 90,\n *     tags: [\"reliable\", \"fast\"],\n *   });\n *\n *   // Request validation\n *   await identity.clients.validation.createRequest({\n *     validatorAddress: \"0x...\",\n *     agentId: identity.record!.agentId,\n *     requestURI: \"ipfs://...\",\n *     requestHash: \"0x...\",\n *   });\n * }\n * ```\n *\n * @example\n * ```ts\n * // With explicit config\n * const identity = await createAgentIdentity({\n *   domain: \"agent.example.com\",\n *   registryAddress: \"0x1234...\",\n *   chainId: 84532,\n *   autoRegister: true,\n *   trustModels: [\"feedback\", \"inference-validation\", \"tee-attestation\"]\n * });\n *\n * console.log(identity.status);\n * // Use identity.trust in your agent manifest\n * // Use identity.clients for reputation and validation\n * ```\n */\nexport async function createAgentIdentity(\n  options: CreateAgentIdentityOptions = {}\n): Promise<AgentIdentity> {\n  const {\n    domain,\n    autoRegister = true,\n    chainId,\n    registryAddress,\n    rpcUrl,\n    privateKey,\n    trustModels = [\"feedback\", \"inference-validation\"],\n    trustOverrides,\n    env,\n    logger,\n    makeClients,\n  } = options;\n\n  const viemFactory =\n    makeClients ??\n    (await makeViemClientsFromEnv({\n      env,\n      rpcUrl,\n      privateKey,\n    }));\n\n  const bootstrapOptions: BootstrapIdentityOptions = {\n    domain,\n    chainId,\n    registryAddress,\n    rpcUrl,\n    env,\n    logger,\n    makeClients: viemFactory,\n    registerIfMissing: autoRegister,\n    trustOverrides: {\n      trustModels,\n      ...trustOverrides,\n    },\n  };\n\n  const result = await bootstrapIdentity(bootstrapOptions);\n\n  let status: string;\n  let isNewRegistration = false;\n\n  if (result.didRegister) {\n    status = \"Successfully registered agent in ERC-8004 registry\";\n    if (result.signature) {\n      status += \" (with domain proof signature)\";\n    }\n    isNewRegistration = true;\n  } else if (result.record) {\n    status = \"Found existing registration in ERC-8004 registry\";\n    if (result.signature) {\n      status += \" (with domain proof signature)\";\n    }\n  } else if (result.trust) {\n    status = \"ERC-8004 identity configured\";\n  } else {\n    status = \"No ERC-8004 identity - agent will run without on-chain identity\";\n  }\n\n  const resolvedDomain =\n    domain ?? (typeof env === \"object\" ? env?.AGENT_DOMAIN : undefined);\n\n  // Create registry clients if we have the necessary components\n  let clients: RegistryClients | undefined;\n\n  if (viemFactory) {\n    try {\n      const resolvedChainId =\n        chainId ??\n        (env && typeof env === \"object\"\n          ? parseInt(env.CHAIN_ID || \"84532\")\n          : 84532);\n      const resolvedRpcUrl =\n        rpcUrl ?? (env && typeof env === \"object\" ? env.RPC_URL : undefined);\n\n      if (resolvedRpcUrl) {\n        const vClients = await viemFactory({\n          chainId: resolvedChainId,\n          rpcUrl: resolvedRpcUrl,\n          env: env ?? {},\n        });\n\n        if (vClients?.publicClient) {\n          const registryAddresses = getRegistryAddresses(resolvedChainId);\n          const identityAddress =\n            registryAddress ?? registryAddresses.IDENTITY_REGISTRY;\n\n          clients = {\n            identity: createIdentityRegistryClient({\n              address: identityAddress,\n              chainId: resolvedChainId,\n              publicClient: vClients.publicClient as PublicClientLike,\n              walletClient: vClients.walletClient as\n                | WalletClientLike\n                | undefined,\n            }),\n            reputation: createReputationRegistryClient({\n              address: registryAddresses.REPUTATION_REGISTRY,\n              chainId: resolvedChainId,\n              publicClient: vClients.publicClient as PublicClientLike,\n              walletClient: vClients.walletClient as\n                | WalletClientLike\n                | undefined,\n              identityRegistryAddress: identityAddress,\n            }),\n            validation: createValidationRegistryClient({\n              address: registryAddresses.VALIDATION_REGISTRY,\n              chainId: resolvedChainId,\n              publicClient: vClients.publicClient as PublicClientLike,\n              walletClient: vClients.walletClient as\n                | WalletClientLike\n                | undefined,\n              identityRegistryAddress: identityAddress,\n            }),\n          };\n        }\n      }\n    } catch (error) {\n      // Failed to create clients, but that's okay - agent can still work without them\n      const log = logger ?? { warn: console.warn };\n      log.warn?.(\n        \"[agent-kit-identity] Failed to create registry clients\",\n        error\n      );\n    }\n  }\n\n  const identity: AgentIdentity = {\n    ...result,\n    status,\n    domain: resolvedDomain,\n    isNewRegistration,\n    clients,\n  };\n\n  // Log metadata JSON after successful registration\n  if (identity.didRegister && identity.domain) {\n    const log = logger ?? { info: console.log };\n    const metadata = generateAgentMetadata(identity);\n\n    log.info?.(\"\\n Host this metadata at your domain:\");\n    log.info?.(\n      `   https://${identity.domain}/.well-known/agent-metadata.json\\n`\n    );\n    log.info?.(JSON.stringify(metadata, null, 2));\n    log.info?.(\"\");\n  }\n\n  return identity;\n}\n\n/**\n * Quick registration helper for agents.\n * This is a convenience wrapper around createAgentIdentity that forces registration.\n *\n * @example\n * ```ts\n * import { registerAgent } from \"@lucid-dreams/agent-kit-identity\";\n *\n * const result = await registerAgent({\n *   domain: \"my-agent.example.com\"\n * });\n *\n * if (result.isNewRegistration) {\n *   console.log(\"Registered! TX:\", result.transactionHash);\n * } else {\n *   console.log(\"Already registered with ID:\", result.record?.agentId);\n * }\n * ```\n */\nexport async function registerAgent(\n  options: CreateAgentIdentityOptions\n): Promise<AgentIdentity> {\n  return createAgentIdentity({\n    ...options,\n    autoRegister: true,\n  });\n}\n\n/**\n * Helper to extract trust config from created identity.\n * Useful when you need just the trust config for your agent manifest.\n *\n * @example\n * ```ts\n * import { createAgentIdentity, getTrustConfig } from \"@lucid-dreams/agent-kit-identity\";\n *\n * const identity = await createAgentIdentity({ autoRegister: true });\n * const trustConfig = getTrustConfig(identity);\n *\n * // Use in createAgentApp\n * createAgentApp({ name: \"my-agent\", version: \"1.0.0\" }, {\n *   trust: trustConfig\n * });\n * ```\n */\nexport function getTrustConfig(result: AgentIdentity): TrustConfig | undefined {\n  return result.trust;\n}\n\n/**\n * Generate agent metadata JSON for hosting at /.well-known/agent-metadata.json\n *\n * @example\n * ```ts\n * const identity = await createAgentIdentity({ autoRegister: true });\n * const metadata = generateAgentMetadata(identity, {\n *   name: \"My Agent\",\n *   description: \"An intelligent assistant\",\n *   capabilities: [{ name: \"chat\", description: \"Natural language conversation\" }]\n * });\n * // Host this JSON at https://your-domain/.well-known/agent-metadata.json\n * ```\n */\nexport function generateAgentMetadata(\n  identity: AgentIdentity,\n  options?: {\n    name?: string;\n    description?: string;\n    capabilities?: Array<{ name: string; description: string }>;\n  }\n) {\n  const metadata: Record<string, unknown> = {\n    name: options?.name || \"Agent\",\n    description: options?.description || \"An AI agent\",\n    domain: identity.domain,\n  };\n\n  if (identity.record?.owner) {\n    metadata.address = identity.record.owner;\n  }\n\n  if (options?.capabilities && options.capabilities.length > 0) {\n    metadata.capabilities = options.capabilities;\n  }\n\n  if (identity.trust?.trustModels && identity.trust.trustModels.length > 0) {\n    metadata.trustModels = identity.trust.trustModels;\n  }\n\n  return metadata;\n}\n"]}